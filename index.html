<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Baby Shower de Aitana</title>
<link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Montserrat:wght@400;700&display=swap" rel="stylesheet">
<style>
body {
  font-family:'Montserrat',sans-serif;
  background:linear-gradient(270deg,#fde8f3,#e6d0fa,#ffe8ae);
  background-size:600% 600%;
  animation:gradientMove 20s ease infinite;
  margin:0;overflow-x:hidden;
  transition:background 1s, color 1s;
}
body.dark {
  background:linear-gradient(270deg,#232333,#2c2c36,#47386e);
  color:#f6f6f6;
}
@keyframes gradientMove {
  0%{background-position:0% 50%}
  50%{background-position:100% 50%}
  100%{background-position:0% 50%}
}
.rain-emoji {
  position:fixed;top:-64px;z-index:1;font-size:2.2rem;pointer-events:none;animation:emojiFall linear infinite;
}
@keyframes emojiFall {
  0%{top:-64px;opacity:.8;}
  90%{opacity:.8;}
  100%{top:100vh;opacity:0;}
}

/* === Botones flotantes (lado derecho) === */
.floating-controls {
  position: fixed;
  right: 24px;
  left: auto;
  bottom: 24px;
  display: flex;
  flex-direction: column;
  gap: 22px;
  z-index: 500;
}
.floating-controls .fc-btn {
  background:#fff;
  border:2px solid #000;
  border-radius: 50%;
  width: 68px; height: 68px;
  display:flex;align-items:center;justify-content:center;
  font-size:2.55rem;color:#000;font-weight:bold;
  box-shadow: 0 2px 22px #b47ae033;
  cursor:pointer; outline:none;
  transition: transform 0.16s;
}
.floating-controls .fc-btn:hover { transform: scale(1.13); }
body.dark .floating-controls .fc-btn {
  background:#fff; color:#000; border-color:#000;
  box-shadow: 0 2px 10px #23233388;
}
@media (max-width:700px) {
  .floating-controls {right:8px;bottom:8px;}
  .floating-controls .fc-btn {width:54px;height:54px;font-size:2rem;}
}

/* === MÃ³dulo explicativo de controles flotantes === */
.floating-info-module {
  max-width: 510px;
  margin: 42px auto 28px auto;
  background: rgba(255,255,255,0.9);
  border-radius: 22px;
  box-shadow: 0 6px 24px #b47ae055;
  padding: 28px 20px 24px 20px;
  text-align: center;
  position: relative;
  z-index: 5;
  backdrop-filter: blur(6px);
  font-size: 1rem;
}
body.dark .floating-info-module {
  background: rgba(44,44,54,0.87);
  color: #ffe8ae;
  box-shadow: 0 6px 24px #23233377;
}
.floating-info-title {
  font-family: 'Dancing Script', cursive;
  font-size: 1.5rem; font-weight: bold;
  text-align: center; margin-bottom: 14px;
  color: #b47ae0;
  background: linear-gradient(90deg,#ff69b4,#ffb6e6,#b47ae0);
  -webkit-background-clip:text;-webkit-text-fill-color:transparent;
}
body.dark .floating-info-title {
  background: linear-gradient(90deg,#ffe8ae,#b795fc,#ffb6e6);
  -webkit-background-clip:text;-webkit-text-fill-color:transparent;
}
.floating-info-list {
  list-style: none; padding: 0; margin: 0 0 8px 0;
  text-align: center; font-size: 0.95rem; display: inline-block;
}
.floating-info-list li {
  margin-bottom: 11px; font-size: 0.98rem;
  display: flex; align-items: center; gap: 12px; justify-content: center;
}
.floating-info-list .icon { font-size: 1.25rem; margin-right: 7px; transition: transform .2s; }
.floating-info-list li:hover .icon { transform: scale(1.18) rotate(-10deg); }
.floating-info-note {
  font-size: 0.95rem; color: #b47ae0; margin-top: 12px; text-align: center; font-weight: bold;
}
body.dark .floating-info-note { color: #ffe8ae; }

/* --- Imagen de Fer --- */
.baby-photo {
  width:100%;
  max-width:600px;
  border-radius:12px;
  margin:20px auto;
  animation: zoomGlow 3s ease-in-out infinite alternate;
  box-shadow:0 0 15px rgba(255,182,230,0.3);
  display: block;
}
@keyframes zoomGlow {
  0%{transform:scale(1);box-shadow:0 0 15px rgba(255,182,230,0.3);}
  100%{transform:scale(1.05);box-shadow:0 0 45px rgba(183,149,252,0.5);}
}

/* --- Resto igual --- */
.balloon {
  position: fixed;
  width: 60px; height: 80px;
  border-radius: 50% 50% 45% 45% / 60% 60% 80% 80%;
  opacity: .18; z-index: 0;
  animation: float 9s infinite ease-in-out, fadeIn 2.3s cubic-bezier(.5,.1,.25,1.2) both;
  transition: opacity .4s; cursor: pointer;
}
.balloon1 { left: 6vw; top: 70vh; background: linear-gradient(120deg,#ffb6e6,#ffe8ae); animation-delay: 0s;}
.balloon2 { left: 80vw; top: 85vh; background: linear-gradient(120deg,#b795fc,#ffb6e6); animation-delay: 2s;}
.balloon3 { left: 25vw; top: 93vh; background: linear-gradient(120deg,#ffe8ae,#b795fc); animation-delay: 1.2s;}
@keyframes float { 0% { transform: translateY(0);} 50% { transform: translateY(-40px);} 100% { transform: translateY(0);} }
@keyframes fadeIn { 0% { opacity:0; transform:scale(.97) translateY(50px);} 100%{ opacity:1; transform:scale(1) translateY(0);} }

#loader {
  position: fixed; top:0; left:0; width:100%; height:100%;
  background: linear-gradient(135deg,#ffe8f3,#e6d0fa,#ffe8ae);
  display:flex; flex-direction:column; justify-content:center; align-items:center;
  z-index:9999; animation: gradientMove 8s infinite alternate;
}
.loader-note { font-size:2.5rem; animation: float 1.5s ease-in-out infinite; }
@keyframes float { 0%,100%{transform:translateY(0);} 50%{transform:translateY(-15px);} }

section {
  max-width:700px;margin:40px auto;background:rgba(255,255,255,0.80);
  padding:20px;border-radius:26px;text-align:center;
  box-shadow:0 4px 30px rgba(183,149,252,0.22);
  opacity:0;transform:translateY(40px);
  transition:all 1s ease; backdrop-filter: blur(14px);
  position: relative; z-index: 2;
}
body.dark section { background:rgba(44,44,54,0.8); color:#eee; box-shadow:0 4px 30px #2c2c36; }
section.visible {opacity:1;transform:translateY(0);}
section.fade-in { opacity:1; animation: fadeIn 2.2s cubic-bezier(.5,.1,.25,1.2) both; }

.main-title,.sub-title {
  font-family:'Dancing Script',cursive;
  background:linear-gradient(90deg,#ff69b4,#ffb6e6,#b47ae0);
  -webkit-background-clip:text;-webkit-text-fill-color:transparent;
  animation: rainbowBorder 3s linear infinite, bounceSlow 4s ease-in-out infinite;
}
body.dark .main-title,body.dark .sub-title {
  background:linear-gradient(90deg,#ffe8ae,#b795fc,#ffb6e6);
  -webkit-background-clip:text;-webkit-text-fill-color:transparent;
}
.main-title {font-size:3rem;margin-bottom:10px;position:relative;z-index:2;}
.sub-title {
  font-size:3.2rem;font-weight:bold;
  animation: rainbowBorder 3s linear infinite, bounceSlow 4s ease-in-out infinite, hueRotate 5s infinite linear;
  z-index:2;
}
@keyframes rainbowBorder { 0% {text-shadow:0 0 6px #ff69b4;} 50% {text-shadow:0 0 14px #b47ae0;} 100% {text-shadow:0 0 6px #ff69b4;} }
@keyframes bounceSlow {0%,100%{transform:translateY(0);}50%{transform:translateY(-8px);} }
@keyframes hueRotate {0%{filter:hue-rotate(0deg);}100%{filter:hue-rotate(360deg);} }

.halo-title {
  position:absolute;left:50%;top:0;transform:translateX(-50%);
  width:340px;height:90px;background:radial-gradient(circle,#ffe8ae88 0%,transparent 80%);
  z-index:1;filter:blur(16px); pointer-events:none;
}
#countdown {
  font-size:1.6rem;font-weight:bold;margin:8px 0;
  background:linear-gradient(90deg,#ff69b4,#ffb6e6,#b47ae0);
  -webkit-background-clip:text;-webkit-text-fill-color:transparent;
  animation:pulseGlow 1.5s infinite alternate;
}
#timer {
  font-size:2rem;font-weight:bold;margin:8px 0;
  background:linear-gradient(90deg,#ff69b4,#ffb6e6,#b47ae0);
  -webkit-background-clip:text;-webkit-text-fill-color:transparent;
  animation:heartbeat 1.4s infinite ease-in-out;
}
@keyframes pulseGlow {0%{text-shadow:0 0 6px #ffe8ae;}100%{text-shadow:0 0 16px #ff69b4;}}
@keyframes heartbeat {0%,100%{transform:scale(1);}50%{transform:scale(1.1);} }

.info-block p {text-align:center;font-weight:bold;margin:10px 0;font-size:1.2rem;}
.highlight-container { font-size:1.8rem;font-weight:bold;color:#ff69b4;margin-bottom:20px; animation: shimmer 3s infinite linear; }
@keyframes shimmer {0%{opacity:.6;}50%{opacity:1;}100%{opacity:.6;}}
.btn-container {display:flex;flex-direction:column;gap:18px;margin-top:25px;}
.btn-3d,.music-btn {
  width:100%;background:linear-gradient(270deg,#ffb6e6,#ffe8ae,#e6d0fa);
  background-size:400% 400%;animation:gradientMove 6s infinite alternate;
  color:#000;font-weight:bold;border-radius:16px;padding:18px;
  font-size:1.1rem;text-align:center;text-decoration:none;transition:transform 0.3s ease, box-shadow .3s;
  position:relative;overflow:hidden;
  box-shadow:0 0 20px 6px #ffe8ae66, 0 2px 10px #ffb6e6dd;
}
body.dark .btn-3d, body.dark .music-btn {
  background:linear-gradient(270deg,#47386e,#232333,#ffe8ae);
  color:#fff; box-shadow: 0 2px 10px #23233388;
}
.btn-3d.magic, .music-btn.magic {
  box-shadow: 0 0 60px 20px #ffe8aecc, 0 2px 30px #ffb6e6cc;
  background: linear-gradient(270deg,#ffe8ae,#ffb6e6,#b795fc);
  transform: scale(1.08); animation: bounceBtn .5s;
}
@keyframes bounceBtn { 0% { transform: scale(1.1);} 40% { transform: scale(0.95);} 60% { transform: scale(1.05);} 100% { transform: scale(1.0);} }
.btn-3d:hover,.music-btn:hover {animation:vibrate 0.4s linear infinite;transform:scale(1.05);}
@keyframes vibrate {0%,100%{transform:translateX(0);}25%{transform:translateX(-2px);}50%{transform:translateX(2px);}75%{transform:translateX(-2px);} }
.sparkle-btn { position: absolute; pointer-events: none; width: 8px; height: 8px; background: radial-gradient(circle, #fff 80%, rgba(255,255,255,0.13) 100%); border-radius: 50%; opacity: .8; animation: sparkle-btn 1.2s infinite alternate; }
@keyframes sparkle-btn { 0% { opacity: 0.6; transform: scale(1);} 100% { opacity: 1; transform: scale(1.3);} }

.btn-3d.confirmar {
  box-shadow: 0 0 60px 20px #ffe8aecc, 0 2px 30px #ffb6e6cc;
  border: 2px solid #ffe8ae; animation: magicConfirm 1.2s infinite alternate;
}
body.dark .btn-3d.confirmar { box-shadow: 0 0 60px 20px #b795fc88, 0 2px 30px #ffe8ae88; border-color:#b795fc; }
@keyframes magicConfirm { 0% { box-shadow: 0 0 60px 20px #ffe8aecc, 0 2px 30px #ffb6e6cc;} 100% { box-shadow: 0 0 90px 30px #ffb6e6aa, 0 2px 40px #ffe8aecc;} }

.confetti,.music-drop {position:fixed;z-index:1;animation:fall linear infinite;}
@keyframes fall {0%{transform:translateY(-10px);}100%{transform:translateY(100vh);} }
.music-drop {font-size:22px;opacity:0.6;}

.qr-container { display:flex; flex-direction:column; align-items:center; gap:8px; margin-top:12px; margin-bottom:14px; }
.qr-container img { width:90px; height:90px; border-radius:12px; box-shadow: 0 2px 14px #b47ae033; }

.scroll-indicator { margin-top:15px;font-size:1.2rem;color:#ff69b4;font-weight:bold;animation:blink 1.5s infinite; }
@keyframes blink {0%,100%{opacity:1;}50%{opacity:0.4;} }
.scroll-arrow {display:block;font-size:2rem;color:#ff69b4;animation:bounceArrow 1.4s infinite;}
@keyframes bounceArrow {0%,100%{transform:translateY(0);}50%{transform:translateY(-8px);} }

.equalizer {display:inline-flex;gap:4px;position:absolute;right:20px;bottom:20px;}
.bar {width:6px;height:18px;background:#fff;border-radius:2px;animation:equalize 1s infinite;}
.bar:nth-child(1){animation-delay:0s;} .bar:nth-child(2){animation-delay:.2s;} .bar:nth-child(3){animation-delay:.4s;}
@keyframes equalize {0%{height:6px;}50%{height:18px;}100%{height:6px;} }

.typewriter {
  font-size:1.5rem;font-weight:bold;color:#b47ae0;border-right:.15em solid #b47ae0;
  white-space:nowrap;overflow:hidden;width:0;animation:type 4s steps(40,end) forwards,blinkCursor .75s step-end infinite;
}
@keyframes type {to{width:100%;}} @keyframes blinkCursor {50%{border-color:transparent;} }

.gif-container { display:flex;justify-content:center;align-items:center;margin-top:30px;position:relative; }
.gif-container img { width:180px;z-index:2;position:relative; cursor:pointer; transition: box-shadow .2s; }
.gif-container img.active { animation: pulseGlow 1.2s infinite alternate; box-shadow: 0 0 40px #ffe8ae99; }
.gif-container::before {
  content:'';position:absolute;width:220px;height:220px;border-radius:50%;
  background:radial-gradient(circle,rgba(255,182,230,0.6),transparent);
  animation:pulseGlow 2s infinite alternate;z-index:1;
}
@keyframes pulseGlow {0%{box-shadow:0 0 10px #b47ae0;}100%{box-shadow:0 0 40px #ffe8ae99;} }

@media (max-width: 700px) {
  section {padding:10px;}
  .main-title {font-size:2.1rem;}
  .sub-title {font-size:2rem;}
  .baby-photo { max-width:95vw; }
  .floating-info-module {padding: 14px 8px;}
}
@keyframes miniConfetti { 0% {opacity:1;transform:translateY(0);} 100% {opacity:0;transform:translateY(-30px) scale(1.2);} }

/* ===== Estilos nuevos para tÃ­tulos especÃ­ficos ===== */
.future-mom-title{
  font-family:'Dancing Script', cursive;
  font-size:2.1rem; font-weight:700;
  margin:28px 0 22px 0; line-height:1.15; text-align:center;
  background:linear-gradient(90deg,#ff69b4,#ffb6e6,#b47ae0);
  -webkit-background-clip:text; -webkit-text-fill-color:transparent;
  text-shadow:0 0 10px rgba(180,122,224,.25);
  animation:futureGlow 3.2s ease-in-out infinite alternate;
}
body.dark .future-mom-title{
  background:linear-gradient(90deg,#ffe8ae,#b795fc,#ffb6e6);
  -webkit-background-clip:text; -webkit-text-fill-color:transparent;
  text-shadow:0 0 10px rgba(255,232,174,.25);
}
@keyframes futureGlow{
  0%{ filter: drop-shadow(0 0 0 rgba(180,122,224,0.0)); }
  100%{ filter: drop-shadow(0 0 6px rgba(180,122,224,0.35)); }
}
.section-title{
  font-family:'Montserrat',sans-serif; font-weight:800; font-size:2rem;
  margin:22px 0 18px 0; text-align:center; color:#b47ae0; letter-spacing:.3px;
}
body.dark .section-title{ color:#ffe8ae; text-shadow:0 0 8px rgba(255,232,174,.25); }

/* ====== Estilos del selector de canciones ====== */
.tracks-wrap { margin: 10px 0 14px 0; }
.tracks-title { font-weight: 700; margin-bottom: 10px; color: #b47ae0; }
.track-grid { display: grid; grid-template-columns: repeat(3,1fr); gap: 12px; }
@media (max-width:700px){ .track-grid{ grid-template-columns:1fr; } }
.track-card {
  position: relative;
  background: linear-gradient(270deg,#ffb6e6,#ffe8ae,#e6d0fa);
  background-size: 300% 300%; animation: gradientMove 8s ease infinite;
  border-radius: 16px; padding: 14px 14px 12px 14px;
  box-shadow: 0 6px 18px rgba(180,122,224,.25);
  cursor: pointer; transition: transform .18s ease, box-shadow .18s ease;
  border: 2px solid transparent; text-align: left;
}
body.dark .track-card{
  background:linear-gradient(270deg,#47386e,#232333,#ffe8ae);
  color:#fff; box-shadow: 0 6px 18px rgba(0,0,0,.35);
}
.track-card:hover { transform: translateY(-2px); box-shadow: 0 10px 24px rgba(180,122,224,.35); }
.track-card.active { border-color:#b47ae0; }
body.dark .track-card.active { border-color:#ffe8ae; }
.track-num {
  width:34px;height:34px;border-radius:50%;display:inline-flex;align-items:center;justify-content:center;
  font-weight:800;background:#fff;color:#b47ae0; box-shadow: 0 2px 8px rgba(0,0,0,.12);
  margin-right:10px;
}
body.dark .track-num { background:#fff; color:#232333; }
.track-texts { display:inline-block; vertical-align:middle; }
.track-artist { font-size:.95rem; font-weight:700; line-height:1.1; }
.track-title  { font-size:.9rem; opacity:.9; }
.track-hint   { font-size:.85rem; margin-top:6px; opacity:.9; }

/* ===== Now Playing ===== */
.now-playing{
  max-width:720px;margin:12px auto 4px auto;position:relative;
  background:rgba(255,255,255,0.9);border:1.5px solid #eadcfb;border-radius:14px;
  padding:12px 14px 16px 14px;box-shadow:0 6px 18px rgba(180,122,224,.18);
  display:flex;flex-direction:column;gap:8px;
}
body.dark .now-playing{
  background:rgba(44,44,54,0.85);border-color:#5b4b86;box-shadow:0 6px 18px rgba(0,0,0,.35);color:#fff;
}
.np-row{display:flex;align-items:center;justify-content:space-between;gap:10px;flex-wrap:wrap;}
.np-left{display:flex;align-items:center;gap:8px;}
.np-dot{ width:10px;height:10px;border-radius:50%;background:#20c997; box-shadow:0 0 10px rgba(32,201,151,.6); }
.now-playing.paused .np-dot{ background:#ff9f1a; box-shadow:0 0 10px rgba(255,159,26,.5); }
.np-label{font-weight:800;letter-spacing:.3px;color:#6f42c1;}
body.dark .np-label{color:#ffe8ae;}
.np-meta{font-weight:700}
.np-meta span{white-space:nowrap;}
.np-right{font-variant-numeric:tabular-nums;opacity:.85;}
.np-progress{ width:100%;height:6px;background:#efe6fb;border-radius:999px;overflow:hidden; }
body.dark .np-progress{background:#3a3255;}
#npBar{height:100%;width:0%;background:linear-gradient(90deg,#ff69b4,#b47ae0);transition:width .25s;}
body.dark #npBar{background:linear-gradient(90deg,#ffe8ae,#b795fc);}
</style>
</head>
<body>

<!-- Botones flotantes -->
<div class="floating-controls">
  <button class="fc-btn" id="theme-btn" title="Modo oscuro/claro">ğŸŒ™</button>
  <button class="fc-btn" id="lang-btn" title="Idioma">ğŸ‡²ğŸ‡½</button>
  <button class="fc-btn" id="music-btn" title="MÃºsica">ğŸµ</button>
</div>

<!-- MÃ³dulo explicativo -->
<div class="floating-info-module">
  <div class="floating-info-title">ğŸ‘‹ Personaliza la invitaciÃ³n</div>
  <ul class="floating-info-list">
    <li><span class="icon">ğŸŒ™</span> Cambia el modo de luz, por si prefieres la invitaciÃ³n clarita o oscura.</li>
    <li><span class="icon">ğŸ‡²ğŸ‡½</span><span class="icon">ğŸ‡ºğŸ‡¸</span> Elige tu idioma favorito: espaÃ±ol o inglÃ©s.</li>
    <li><span class="icon">ğŸµ</span> Ponle mÃºsica de fondo para ambientar el momento.</li>
  </ul>
  <div class="floating-info-note">Â¡Haz clic en los botones de abajo a la derecha y disfruta la experiencia como tÃº quieras!</div>
</div>

<div id="emojiRain"></div>
<div class="balloon balloon1" onclick="popBalloon(this)"></div>
<div class="balloon balloon2" onclick="popBalloon(this)"></div>
<div class="balloon balloon3" onclick="popBalloon(this)"></div>
<audio id="popBalloonSound" src="https://raw.githubusercontent.com/dannzanetti/invitacion-aitana/main/pop.mp3"></audio>

<div id="loader">
  <p id="loaderText" style="font-size:1.5rem;font-weight:bold;color:#b47ae0;">Cargando invitaciÃ³n...</p>
  <div class="loader-note">ğŸµ ğŸ¶ ğŸµ</div>
</div>

<div class="equalizer" id="equalizer" style="display:none;">
  <div class="bar"></div><div class="bar"></div><div class="bar"></div>
</div>

<main style="display:none;" id="main-content">
  <section class="fade-in">
    <div class="qr-container">
      <img src="https://api.qrserver.com/v1/create-qr-code/?size=120x120&data=https://dannzanetti.github.io/invitacion-aitana/" alt="QR InvitaciÃ³n"/>
      <a href="https://api.whatsapp.com/send?text=Â¡Te%20invito%20al%20Baby%20Shower%20de%20Aitana!%20https://dannzanetti.github.io/invitacion-aitana/" target="_blank" class="btn-3d" id="qrBtn" style="font-size:1rem;width:auto;padding:8px 14px;display:inline-block;margin-top:4px;">ğŸ’¬ Compartir por WhatsApp</a>
    </div>

    <!-- === Selector de canciones === -->
    <div class="tracks-wrap">
      <div id="listenMusic" class="tracks-title">ğŸµ Elige una canciÃ³n para ambientar:</div>
      <div class="track-grid">
        <div class="track-card" data-index="0" aria-label="Reproducir pista 1">
          <span class="track-num">1</span>
          <span class="track-texts">
            <div class="track-artist">The Outfield</div>
            <div class="track-title">All The Love In The World</div>
          </span>
          <div class="track-hint">Toca para reproducir / pausar</div>
        </div>

        <div class="track-card" data-index="1" aria-label="Reproducir pista 2">
          <span class="track-num">2</span>
          <span class="track-texts">
            <div class="track-artist">Coldplay</div>
            <div class="track-title">A Sky Full Of Stars</div>
          </span>
          <div class="track-hint">Toca para reproducir / pausar</div>
        </div>

        <div class="track-card" data-index="2" aria-label="Reproducir pista 3">
          <span class="track-num">3</span>
          <span class="track-texts">
            <div class="track-artist">ROSÃ‰ & Bruno Mars</div>
            <div class="track-title">APT.</div>
          </span>
          <div class="track-hint">Toca para reproducir / pausar</div>
        </div>
      </div>
    </div>

    <!-- Now Playing (mini player) -->
    <div class="now-playing paused" id="nowPlaying">
      <div class="np-row">
        <div class="np-left">
          <div class="np-dot"></div>
          <div class="np-label">Now Playing</div>
        </div>
        <div class="np-meta">
          <span id="npArtist">â€”</span> â€” <span id="npTitle">â€”</span>
        </div>
        <div class="np-right">
          <span id="npTime">0:00</span>
        </div>
      </div>
      <div class="np-progress"><div id="npBar"></div></div>
    </div>

    <!-- Reproductor -->
    <audio id="music"></audio>
    <audio id="popSound">
      <source src="https://raw.githubusercontent.com/dannzanetti/invitacion-aitana/main/pop.mp3" type="audio/mpeg">
    </audio>
  </section>

  <section class="fade-in" style="position:relative;">
    <div class="halo-title"></div>
    <h1 class="main-title">ğŸ€ Baby Shower ğŸ€</h1>
    <h2 class="sub-title">ğŸ€ AITANA ğŸ€</h2>
    <img src="https://raw.githubusercontent.com/dannzanetti/invitacion-aitana/main/Baby.png" alt="Baby" class="baby-photo"/>
    <p id="futureMom" class="future-mom-title">La futura MamÃ¡, Fer</p>
    <img src="https://raw.githubusercontent.com/dannzanetti/invitacion-aitana/main/0.JPG" alt="La futura MamÃ¡, Fer" class="baby-photo" style="margin-top:12px;max-width:480px;">
  </section>

  <section class="fade-in">
    <div id="countdown">ğŸˆ Â¡Faltan X dÃ­as para el gran dÃ­a! ğŸˆ</div>
    <div id="timer">00d : 00h : 00m : 00s</div>
  </section>

  <section class="info-block fade-in">
    <p id="infoDate">ğŸ“… <strong>SÃ¡bado 20 de Septiembre</strong></p>
    <p id="infoTime">â° <strong>2:00 PM â€“ 11:00 PM</strong></p>
    <p id="infoPlace">ğŸ˜ï¸ <strong>Residencial Sendero Santa Fe</strong></p>
    <p id="infoRSVP">âš ï¸ <strong>Confirma antes del 14 de septiembre</strong></p>
  </section>

  <section class="fade-in">
    <div class="highlight-container" id="partyTitle">Â¡Te esperamos con!</div>
    <div style="margin-top:20px;">
      <p id="food">ğŸŒ® Tacos de guisado</p>
      <p id="bar">ğŸ¸ Barra libre:</p>
      <p id="drinks">ğŸ» Cervezas | ğŸ¹ Tequila | ğŸ¥ƒ Ron | ğŸ¥‚ Whisky</p>
      <p id="fun">ğŸ² Juegos | ğŸ–ï¸ Rifas | ğŸ’ƒ Baile</p>
    </div>
  </section>

  <section class="fade-in">
    <div class="btn-container">
      <a href="https://waze.com/ul/h9g3qhubmq" target="_blank" class="btn-3d" id="waze">ğŸ“ CÃ³mo llegar con Waze</a>
      <a href="https://maps.app.goo.gl/aJot9z4Qja81DHsw8?g_st=aw" target="_blank" class="btn-3d" id="gmaps">ğŸ“ CÃ³mo llegar con Google Maps</a>
      <a href="https://docs.google.com/forms/d/e/1FAIpQLSd-vY-AAhe7GGVQdxJmZvxr-5m6rQh7PgrfKwXY0Dn1-ksgRw/viewform" target="_blank" class="btn-3d confirmar" id="confirmar-btn">âœ… Confirmar asistencia</a>
      <a href="https://mesaderegalos.liverpool.com.mx/milistaderegalos/51734815" target="_blank" class="btn-3d" id="liverpool">ğŸ Mesa de regalos Liverpool</a>
      <a href="https://www.amazon.com.mx/baby-reg/waldodanielalvarez-martinez-diciembre-2025-ciudaddemexico/187ABTMWV8E8D" target="_blank" class="btn-3d" id="amazon">ğŸ“¦ Mesa de regalos Amazon</a>
    </div>
  </section>

  <section class="fade-in">
    <div style="display:flex;justify-content:space-between;gap:10px;">
      <a href="https://calendar.google.com/calendar/render?action=TEMPLATE&text=Baby+Shower+Aitana&dates=20250920T200000Z/20250921T050000Z&details=Baby+Shower+de+Aitana&location=Residencial+Sendero+Santa+Fe" target="_blank" class="btn-3d" id="calendarG" style="width:48%;">ğŸ“… Google Calendar</a>
      <a href="https://dannzanetti.github.io/invitacion-aitana/babyshower.ics" class="btn-3d" id="calendarA" style="width:48%;">ğŸ Apple Calendar</a>
    </div>

    <!-- GalerÃ­a slider -->
    <section class="fade-in">
      <h2 id="genderRevealTitle" class="section-title">Â¡AsÃ­ vivimos el Gender Reveal! ğŸ‰ğŸ’—</h2>

      <style>
        .slider-container {
          position: relative; max-width: 720px; margin: 0 auto; overflow: hidden;
          border-radius: 14px; box-shadow: 0 6px 20px rgba(180,122,224,0.2);
        }
        .slider { display: flex; transition: transform 0.5s ease-in-out; }
        .slide { min-width: 100%; box-sizing: border-box; }
        .slide img { width: 100%; height: auto; display: block; border-radius: 12px; }

        .prev, .next {
          position: absolute; top: 50%; transform: translateY(-50%);
          background-color: #ffffffcc; color: #b47ae0; font-weight: bold; font-size: 2rem;
          border: none; cursor: pointer; padding: 8px 14px; border-radius: 50%;
          box-shadow: 0 2px 8px rgba(0,0,0,0.2); z-index: 10;
        }
        .prev:hover, .next:hover { background-color: #ffe8ae; }
        .prev { left: 10px; } .next { right: 10px; }

        .dots { text-align: center; margin-top: 12px; }
        .dots span {
          height: 12px; width: 12px; margin: 0 4px; background-color: #ddd;
          border-radius: 50%; display: inline-block; cursor: pointer; transition: background-color 0.3s;
        }
        .dots .active { background-color: #b47ae0; }
      </style>

      <div class="slider-container">
        <div class="slider" id="photoSlider">
          <!-- Fotos desde la raÃ­z del repo -->
          <div class="slide"><img src="https://raw.githubusercontent.com/dannzanetti/invitacion-aitana/main/1.JPG" alt="Foto 1"></div>
          <div class="slide"><img src="https://raw.githubusercontent.com/dannzanetti/invitacion-aitana/main/2.JPG" alt="Foto 2"></div>
          <div class="slide"><img src="https://raw.githubusercontent.com/dannzanetti/invitacion-aitana/main/3.JPG" alt="Foto 3"></div>
          <div class="slide"><img src="https://raw.githubusercontent.com/dannzanetti/invitacion-aitana/main/4.JPG" alt="Foto 4"></div>
          <div class="slide"><img src="https://raw.githubusercontent.com/dannzanetti/invitacion-aitana/main/5.JPG" alt="Foto 5"></div>
          <div class="slide"><img src="https://raw.githubusercontent.com/dannzanetti/invitacion-aitana/main/6.JPG" alt="Foto 6"></div>
          <div class="slide"><img src="https://raw.githubusercontent.com/dannzanetti/invitacion-aitana/main/7.JPG" alt="Foto 7"></div>
          <div class="slide"><img src="https://raw.githubusercontent.com/dannzanetti/invitacion-aitana/main/8.JPG" alt="Foto 8"></div>
          <div class="slide"><img src="https://raw.githubusercontent.com/dannzanetti/invitacion-aitana/main/9.JPG" alt="Foto 9"></div>
          <div class="slide"><img src="https://raw.githubusercontent.com/dannzanetti/invitacion-aitana/main/10.JPG" alt="Foto 10"></div>
          <div class="slide"><img src="https://raw.githubusercontent.com/dannzanetti/invitacion-aitana/main/11.JPG" alt="Foto 11"></div>
          <div class="slide"><img src="https://raw.githubusercontent.com/dannzanetti/invitacion-aitana/main/12.JPG" alt="Foto 12"></div>
          <div class="slide"><img src="https://raw.githubusercontent.com/dannzanetti/invitacion-aitana/main/13.JPG" alt="Foto 13"></div>
          <div class="slide"><img src="https://raw.githubusercontent.com/dannzanetti/invitacion-aitana/main/14.JPG" alt="Foto 14"></div>
          <div class="slide"><img src="https://raw.githubusercontent.com/dannzanetti/invitacion-aitana/main/15.JPG" alt="Foto 15"></div>
          <div class="slide"><img src="https://raw.githubusercontent.com/dannzanetti/invitacion-aitana/main/16.JPG" alt="Foto 16"></div>
          <div class="slide"><img src="https://raw.githubusercontent.com/dannzanetti/invitacion-aitana/main/17.JPG" alt="Foto 17"></div>
          <div class="slide"><img src="https://raw.githubusercontent.com/dannzanetti/invitacion-aitana/main/18.JPG" alt="Foto 18"></div>
          <div class="slide"><img src="https://raw.githubusercontent.com/dannzanetti/invitacion-aitana/main/19.JPG" alt="Foto 19"></div>
          <div class="slide"><img src="https://raw.githubusercontent.com/dannzanetti/invitacion-aitana/main/20.JPG" alt="Foto 20"></div>
          <div class="slide"><img src="https://raw.githubusercontent.com/dannzanetti/invitacion-aitana/main/21.JPG" alt="Foto 21"></div>
        </div>

        <button class="prev" onclick="prevSlide()">â®</button>
        <button class="next" onclick="nextSlide()">â¯</button>
        <div class="dots" id="dotsContainer"></div>
      </div>

      <script>
        let currentIndex = 0;
        const slides = document.querySelectorAll('.slide');
        const slider = document.getElementById('photoSlider');
        const dotsContainer = document.getElementById('dotsContainer');

        slides.forEach((_, i) => {
          const dot = document.createElement('span');
          dot.onclick = () => goToSlide(i);
          dotsContainer.appendChild(dot);
        });
        const dots = dotsContainer.querySelectorAll('span');

        function updateSlider() {
          slider.style.transform = `translateX(-${currentIndex * 100}%)`;
          dots.forEach(dot => dot.classList.remove('active'));
          dots[currentIndex].classList.add('active');
        }
        function nextSlide() { currentIndex = (currentIndex + 1) % slides.length; updateSlider(); }
        function prevSlide() { currentIndex = (currentIndex - 1 + slides.length) % slides.length; updateSlider(); }
        function goToSlide(index) { currentIndex = index; updateSlider(); }

        updateSlider();
        setInterval(() => nextSlide(), 4000);
      </script>
    </section>
  </section>

  <section class="fade-in">
    <p class="typewriter">ğŸ’• Â¡Gracias por acompaÃ±arnos! ğŸ’•</p>
    <div class="gif-container">
      <img id="finalGif" src="https://media0.giphy.com/media/v1.Y2lkPTc5MGI3NjExeWV0NDMza3c2eXVsM2VrMnNhdHcyMG0yN2Z5YzN5aWV2bHJpdjk1OSZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/QMkPpxPDYY0fu/giphy.gif" alt="GIF Final">
    </div>
    <p id="gifFinal" style="margin-top:20px;font-size:1.4rem;color:#b47ae0;font-weight:bold;">âœ¨ Â¡SerÃ¡ un dÃ­a mÃ¡gico para celebrar juntos! âœ¨</p>
  </section>
</main>

<script>
// Lluvia animada de emojis (mÃ¡s intensa)
const emojiRain = document.getElementById('emojiRain');
const emojis = ['ğŸ’–','âœ¨','ğŸ¦‹','ğŸŒ¸','ğŸ£','ğŸ™ˆ','ğŸ™‰','ğŸ™Š','ğŸ','ğŸ¶','â­','ğŸ’«','ğŸŠ','ğŸ¼','ğŸ‰'];
function rainEmojis() {
  for(let i=0;i<20;i++){
    const e = document.createElement('span');
    e.className='rain-emoji';
    e.textContent=emojis[Math.floor(Math.random()*emojis.length)];
    e.style.left=Math.random()*98+'vw';
    e.style.animationDuration=(4.5+Math.random()*2.5)+'s';
    e.style.animationDelay=(Math.random()*2)+'s';
    emojiRain.appendChild(e);
    setTimeout(()=>e.remove(),7000);
  }
}
setInterval(rainEmojis,2000);
rainEmojis();

const translations = {
  es: {
    mainTitle: 'ğŸ€ Baby Shower ğŸ€',
    subTitle: 'ğŸ€ AITANA ğŸ€',
    qrBtn: 'ğŸ’¬ Compartir por WhatsApp',
    listenMusic: 'ğŸµ Elige una canciÃ³n para ambientar:',
    musicBtn: 'â–¶ï¸ MÃºsica ON/OFF',
    scroll: 'Â¡Sigue bajando para ver todos los detalles!',
    countdown: 'ğŸˆ Â¡Faltan X dÃ­as para el gran dÃ­a! ğŸˆ',
    today: 'ğŸ‰ Â¡Hoy es el gran dÃ­a! ğŸ‰',
    timer: '00d : 00h : 00m : 00s',
    infoDate: 'ğŸ“… <strong>SÃ¡bado 20 de Septiembre</strong>',
    infoTime: 'â° <strong>2:00 PM â€“ 11:00 PM</strong>',
    infoPlace: 'ğŸ˜ï¸ <strong>Residencial Sendero Santa Fe</strong>',
    infoRSVP: 'âš ï¸ <strong>Confirma antes del 14 de septiembre</strong>',
    partyTitle: 'Â¡Te esperamos con!',
    food: 'ğŸŒ® Tacos de guisado',
    bar: 'ğŸ¸ Barra libre:',
    drinks: 'ğŸ» Cervezas | ğŸ¹ Tequila | ğŸ¥ƒ Ron | ğŸ¥‚ Whisky',
    fun: 'ğŸ² Juegos | ğŸ–ï¸ Rifas | ğŸ’ƒ Baile',
    waze: 'ğŸ“ CÃ³mo llegar con Waze',
    gmaps: 'ğŸ“ CÃ³mo llegar con Google Maps',
    confirmBtn: 'âœ… Confirmar asistencia',
    liverpool: 'ğŸ Mesa de regalos Liverpool',
    amazon: 'ğŸ“¦ Mesa de regalos Amazon',
    calendarG: 'ğŸ“… Google Calendar',
    calendarA: 'ğŸ Apple Calendar',
    thanks: 'ğŸ’• Â¡Gracias por acompaÃ±arnos! ğŸ’•',
    gifFinal: 'âœ¨ Â¡SerÃ¡ un dÃ­a mÃ¡gico para celebrar juntos! âœ¨',
    esEn: 'ğŸ‡²ğŸ‡½',
    confirmMsg: 'Â¡Gracias por confirmar tu asistencia! ğŸ‰',
    joyMsg: 'Â¡Gracias por tu alegrÃ­a! ğŸ’œ',
    loading: 'Cargando invitaciÃ³n...',
    floatingInfoTitle: "ğŸ‘‹ Personaliza la invitaciÃ³n",
    floatingInfoList: [
      "ğŸŒ™ Cambia el modo de luz, por si prefieres la invitaciÃ³n clarita o oscura.",
      "ğŸ‡²ğŸ‡½ ğŸ‡ºğŸ‡¸ Elige tu idioma favorito: espaÃ±ol o inglÃ©s.",
      "ğŸµ Ponle mÃºsica de fondo para ambientar el momento."
    ],
    floatingInfoNote: "Â¡Haz clic en los botones de abajo a la derecha y disfruta la experiencia como tÃº quieras!",
    futureMom: "La futura MamÃ¡, Fer",
    genderRevealTitle: "Â¡AsÃ­ vivimos el Gender Reveal! ğŸ‰ğŸ’—"
  },
  en: {
    mainTitle: "ğŸ€ Baby Shower ğŸ€",
    subTitle: "ğŸ€ AITANA ğŸ€",
    qrBtn: "ğŸ’¬ Share by WhatsApp",
    listenMusic: "ğŸµ Pick a song to set the mood:",
    musicBtn: "â–¶ï¸ Music ON/OFF",
    scroll: "Scroll down for all the details!",
    countdown: "ğŸˆ X days left for the big day! ğŸˆ",
    today: "ğŸ‰ Today is the big day! ğŸ‰",
    timer: "00d : 00h : 00m : 00s",
    infoDate: "ğŸ“… <strong>Saturday, September 20</strong>",
    infoTime: "â° <strong>2:00 PM â€“ 11:00 PM</strong>",
    infoPlace: "ğŸ˜ï¸ <strong>Residencial Sendero Santa Fe</strong>",
    infoRSVP: "âš ï¸ <strong>Confirm before September 14</strong>",
    partyTitle: "We'll be waiting with:",
    food: "ğŸŒ® Guisado tacos",
    bar: "ğŸ¸ Open bar:",
    drinks: "ğŸ» Beer | ğŸ¹ Tequila | ğŸ¥ƒ Rum | ğŸ¥‚ Whisky",
    fun: "ğŸ² Games | ğŸ–ï¸ Raffles | ğŸ’ƒ Dancing",
    waze: "ğŸ“ Waze Directions",
    gmaps: "ğŸ“ Google Maps Directions",
    confirmBtn: "âœ… Confirm attendance",
    liverpool: "ğŸ Liverpool Gift Table",
    amazon: "ğŸ“¦ Amazon Gift Table",
    calendarG: "ğŸ“… Google Calendar",
    calendarA: "ğŸ Apple Calendar",
    thanks: "ğŸ’• Thank you for joining us! ğŸ’•",
    gifFinal: "âœ¨ It'll be a magical day to celebrate together! âœ¨",
    esEn: "ğŸ‡ºğŸ‡¸",
    confirmMsg: "Thanks for confirming! ğŸ‰",
    joyMsg: "Thanks for your joy! ğŸ’œ",
    loading: "Loading invitation...",
    floatingInfoTitle: "ğŸ‘‹ Customize the invitation",
    floatingInfoList: [
      "ğŸŒ™ Switch between light and dark modes.",
      "ğŸ‡²ğŸ‡½ ğŸ‡ºğŸ‡¸ Choose your favorite language: Spanish or English.",
      "ğŸµ Add background music to set the mood."
    ],
    floatingInfoNote: "Click the buttons at the bottom right and enjoy the experience your way!",
    futureMom: "The future mom, Fer",
    genderRevealTitle: "This is how we enjoyed the Gender Reveal! ğŸ‰ğŸ’—"
  }
};

let lang = localStorage.getItem('lang') || 'es';

function renderLanguage() {
  const t = translations[lang];
  const q = (sel) => document.querySelector(sel);
  const byId = (id) => document.getElementById(id);
  const setText = (sel, txt) => { const el = q(sel); if (el && txt != null) el.innerText = txt; };
  const setHTML = (id, html) => { const el = byId(id); if (el && html != null) el.innerHTML = html; };

  setText('.main-title', t.mainTitle);
  setText('.sub-title', t.subTitle);

  const langBtn = byId('lang-btn'); if (langBtn) langBtn.innerText = t.esEn || langBtn.innerText;
  const loaderText = byId('loaderText'); if (loaderText) loaderText.innerText = t.loading || loaderText.innerText;

  setText('#listenMusic', t.listenMusic);

  const scrollIndicator = q('.scroll-indicator');
  if (scrollIndicator && t.scroll) {
    scrollIndicator.innerHTML = `<span class="scroll-arrow">â¬‡ï¸</span> ${t.scroll} <span class="scroll-arrow">â¬‡ï¸</span>`;
  }

  setText('#countdown', t.countdown);
  setText('#timer', t.timer);

  setHTML('infoDate', t.infoDate);
  setHTML('infoTime', t.infoTime);
  setHTML('infoPlace', t.infoPlace);
  setHTML('infoRSVP', t.infoRSVP);

  setText('#partyTitle', t.partyTitle);
  setText('#food', t.food);
  setText('#bar', t.bar);
  setText('#drinks', t.drinks);
  setText('#fun', t.fun);

  setText('#waze', t.waze);
  setText('#gmaps', t.gmaps);
  setText('#confirmar-btn', t.confirmBtn);
  setText('#liverpool', t.liverpool);
  setText('#amazon', t.amazon);
  setText('#calendarG', t.calendarG);
  setText('#calendarA', t.calendarA);

  setText('.typewriter', t.thanks);
  setText('#gifFinal', t.gifFinal);

  setText('.floating-info-title', t.floatingInfoTitle);
  const infoItems = document.querySelectorAll('.floating-info-list li');
  if (infoItems && infoItems.length && Array.isArray(t.floatingInfoList)) {
    infoItems.forEach((li, i) => { if (t.floatingInfoList[i] !== undefined) li.innerHTML = t.floatingInfoList[i]; });
  }
  setText('.floating-info-note', t.floatingInfoNote);

  setText('#futureMom', t.futureMom);
  setText('#genderRevealTitle', t.genderRevealTitle);
}

// Tema oscuro/claro
function toggleTheme() {
  document.body.classList.toggle('dark');
  localStorage.setItem('theme', document.body.classList.contains('dark') ? 'dark' : 'light');
  document.getElementById('theme-btn').innerText = document.body.classList.contains('dark') ? 'â˜€ï¸' : 'ğŸŒ™';
}

// Idioma
function toggleLang() {
  lang = lang === 'es' ? 'en' : 'es';
  localStorage.setItem('lang', lang);
  document.getElementById('lang-btn').innerText = translations[lang].esEn;
  renderLanguage();
}

// MÃºsica ON/OFF (usa el mismo player)
function toggleMusic() {
  const eq = document.getElementById('equalizer');
  if (player.paused) { player.play(); if (eq) eq.style.display='inline-flex'; }
  else { player.pause(); if (eq) eq.style.display='none'; }
}

/* ===== Player mÃºltiple (3 canciones) ===== */
const TRACKS = [
  { file: 'jump.mp3',     artist: 'The Outfield',       title: 'All The Love In The World' },
  { file: 'coldplay.mp3', artist: 'Coldplay',           title: 'A Sky Full Of Stars' },
  { file: 'bruno.mp3',    artist: 'ROSÃ‰ & Bruno Mars',  title: 'APT.' }
];
const BASE = 'https://raw.githubusercontent.com/dannzanetti/invitacion-aitana/main/';
const player = document.getElementById('music');
const eq     = document.getElementById('equalizer');
const cards  = document.querySelectorAll('.track-card');
player.loop = true;

let currentTrack = 0;

function setTrack(i, autoplay = true) {
  currentTrack = i;
  player.src = BASE + TRACKS[i].file;
  if (autoplay) {
    player.play()
      .then(() => { if (eq) eq.style.display = 'inline-flex'; updateUI(); })
      .catch(()=>{ /* puede requerir interacciÃ³n del usuario */ });
  } else {
    updateUI();
  }
}

function updateUI() {
  cards.forEach((c, idx) => c.classList.toggle('active', idx === currentTrack && !player.paused));
}

// Click tarjetas
cards.forEach(card => {
  card.addEventListener('click', () => {
    const idx = Number(card.dataset.index);
    if (idx !== currentTrack) {
      setTrack(idx, true);
    } else {
      if (player.paused) {
        player.play().then(()=>{ if (eq) eq.style.display='inline-flex'; updateUI(); });
      } else {
        player.pause(); if (eq) eq.style.display='none'; updateUI();
      }
    }
  });
});

// Now Playing sync
(function(){
  const np = document.getElementById('nowPlaying');
  const npArtist = document.getElementById('npArtist');
  const npTitle  = document.getElementById('npTitle');
  const npTime   = document.getElementById('npTime');
  const npBar    = document.getElementById('npBar');

  function fmtTime(sec){
    if (!isFinite(sec)) return '0:00';
    const m = Math.floor(sec/60);
    const s = Math.floor(sec%60).toString().padStart(2,'0');
    return `${m}:${s}`;
  }
  function updateMeta(){
    const track = TRACKS[currentTrack];
    if (track){ npArtist.textContent = track.artist; npTitle.textContent = track.title; }
  }
  function updateState(){ if (player.paused) np.classList.add('paused'); else np.classList.remove('paused'); }
  function updateProgress(){
    const cur = player.currentTime || 0;
    const dur = player.duration || 0;
    npTime.textContent = `${fmtTime(cur)}${dur? ' / '+fmtTime(dur):''}`;
    npBar.style.width = (dur ? (cur/dur)*100 : 0) + '%';
  }

  player.addEventListener('loadedmetadata', () => { updateMeta(); updateProgress(); });
  player.addEventListener('play',  () => { if (eq) eq.style.display='inline-flex'; updateState(); updateUI(); });
  player.addEventListener('pause', () => { if (eq) eq.style.display='none';        updateState(); updateUI(); });
  player.addEventListener('timeupdate', () => { updateProgress(); });

  const originalSetTrack = typeof setTrack === 'function' ? setTrack : null;
  if (originalSetTrack) {
    window.setTrack = function(i, autoplay = true){
      originalSetTrack(i, autoplay);
      updateMeta(); npBar.style.width='0%'; npTime.textContent='0:00';
    }
  }
  updateMeta(); updateState(); updateProgress();
})();

// Auto modo oscuro (despuÃ©s de las 7pm si el usuario no eligiÃ³)
const savedTheme = localStorage.getItem('theme');
if (!savedTheme) {
  const hour = new Date().getHours();
  if (hour >= 19 || hour < 6) {
    document.body.classList.add('dark');
    localStorage.setItem('theme', 'dark');
  }
}

document.addEventListener('DOMContentLoaded',()=>{
  document.getElementById('theme-btn').onclick = toggleTheme;
  document.getElementById('lang-btn').onclick  = toggleLang;
  document.getElementById('music-btn').onclick = toggleMusic;
  document.getElementById('theme-btn').innerText = document.body.classList.contains('dark') ? 'â˜€ï¸' : 'ğŸŒ™';
  document.getElementById('lang-btn').innerText   = translations[lang].esEn;
  renderLanguage();

  setTimeout(()=>{
    document.getElementById('loader').style.display='none';
    document.getElementById('main-content').style.display='block';
    document.querySelectorAll('section').forEach(s=>s.classList.add('fade-in'));
  },2500);

  document.querySelectorAll('.btn-3d, .music-btn').forEach(btn => {
    btn.addEventListener('click', function(e) {
      btn.classList.add('magic');
      for(let i=0;i<15;i++){
        const c = document.createElement('div');
        c.className = '';
        c.style.position = 'absolute';
        c.style.left = (e.offsetX || btn.offsetWidth/2) + (Math.random()*40-20) + 'px';
        c.style.top = (e.offsetY || btn.offsetHeight/2) + (Math.random()*24-12) + 'px';
        c.style.background = ['#ffb6e6','#ffe8ae','#b795fc'][Math.floor(Math.random()*3)];
        c.style.width = (6+Math.random()*8)+'px';
        c.style.height = c.style.width;
        c.style.borderRadius = '50%';
        c.style.pointerEvents = 'none';
        c.style.opacity = .9;
        c.style.zIndex = '10';
        c.style.animation = 'miniConfetti .8s linear forwards';
        btn.appendChild(c);
        setTimeout(()=>c.remove(),800);
      }
      setTimeout(()=>btn.classList.remove('magic'),500);
    });
    for(let i=0;i<3;i++){
      const spark = document.createElement('span');
      spark.className = 'sparkle-btn';
      spark.style.top = Math.random()*70+'%';
      spark.style.left = Math.random()*90+'%';
      spark.style.animationDelay = (Math.random()*1) + "s";
      btn.appendChild(spark);
    }
  });

  for(let i=0;i<80;i++){
    const confetti=document.createElement('div');
    confetti.className='confetti';
    confetti.style.left=Math.random()*100+'vw';
    confetti.style.background=['#ffb6e6','#ffe8ae','#b795fc'][Math.floor(Math.random()*3)];
    confetti.style.width=(6+Math.random()*8)+'px';
    confetti.style.height=confetti.style.width;
    confetti.style.animationDuration=(4+Math.random()*5)+'s';
    confetti.style.animationDelay=(Math.random()*6)+'s';
    document.body.appendChild(confetti);
  }
  for(let i=0;i<10;i++){
    const note=document.createElement('div');
    note.className='music-drop';
    note.innerHTML=Math.random()>0.5?'ğŸµ':'ğŸ¶';
    note.style.left=Math.random()*95+'vw';
    note.style.animationDuration=(10+Math.random()*5)+'s';
    note.style.animationDelay=(Math.random()*4)+'s';
    document.body.appendChild(note);
  }

  // Inicializa con la pista 1 cargada (sin reproducir)
  setTrack(0, false);
});

// Observer de secciones
const sections=document.querySelectorAll('section');
const observer=new IntersectionObserver(entries=>{
  entries.forEach(entry=>{if(entry.isIntersecting){entry.target.classList.add('visible');}});
},{threshold:0.2});
sections.forEach(section=>observer.observe(section));

// Countdown
const countdownEl=document.getElementById('countdown');
const timerEl=document.getElementById('timer');
const eventDate=new Date('2025-09-20T14:00:00');
function updateCountdown(){
  const now=new Date();const diff=eventDate-now;
  if(diff<=0){
    countdownEl.textContent=translations[lang].today;
    timerEl.textContent=translations[lang].timer;
    return;
  }
  const d=Math.floor(diff/(1000*60*60*24));
  const h=Math.floor((diff%(1000*60*60*24))/(1000*60*60));
  const m=Math.floor((diff%(1000*60*60))/(1000*60));
  const s=Math.floor((diff%(1000*60))/1000);
  countdownEl.textContent=translations[lang].countdown.replace('X',d);
  timerEl.textContent=`${d}d : ${h}h : ${m}m : ${s}s`;
}
updateCountdown();
setInterval(updateCountdown,1000);

// Confirmar asistencia confetti
document.getElementById('confirmar-btn').addEventListener('click', function(){
  setTimeout(function(){
    for(let i=0;i<30;i++){
      const confetti=document.createElement('div');
      confetti.className='confetti';
      confetti.style.left=Math.random()*100+'vw';
      confetti.style.background=['#ffb6e6','#ffe8ae','#b795fc'][Math.floor(Math.random()*3)];
      confetti.style.width=(8+Math.random()*10)+'px';
      confetti.style.height=confetti.style.width;
      confetti.style.animationDuration=(2+Math.random()*2)+'s';
      confetti.style.animationDelay=(Math.random()*1)+'s';
      confetti.style.zIndex = 9999;
      document.body.appendChild(confetti);
      setTimeout(()=>confetti.remove(),3000);
    }
    alert(translations[lang].confirmMsg);
  },100);
});

// Globos
function popBalloon(balloon) {
  balloon.style.opacity = 0;
  document.getElementById('popBalloonSound').currentTime=0;
  document.getElementById('popBalloonSound').play();
  for(let i=0;i<20;i++){
    const confetti=document.createElement('div');
    confetti.className='confetti';
    confetti.style.left=(balloon.getBoundingClientRect().left+30)+'px';
    confetti.style.top=(balloon.getBoundingClientRect().top+50)+'px';
    confetti.style.background=['#ffb6e6','#ffe8ae','#b795fc'][Math.floor(Math.random()*3)];
    confetti.style.width=(8+Math.random()*8)+'px';
    confetti.style.height=confetti.style.width;
    confetti.style.position='fixed';
    confetti.style.animationDuration=(1.2+Math.random()*1)+'s';
    confetti.style.animationDelay=(Math.random()*0.7)+'s';
    confetti.style.zIndex = 9999;
    document.body.appendChild(confetti);
    setTimeout(()=>confetti.remove(),2500);
  }
  setTimeout(()=>{balloon.style.display='none';},600);
}

// GIF final
document.getElementById('finalGif').addEventListener('click',function(){
  this.classList.add('active');
  for(let i=0;i<40;i++){
    const confetti=document.createElement('div');
    confetti.className='confetti';
    confetti.style.left=(window.innerWidth/2+Math.random()*120-60)+'px';
    confetti.style.top=(window.innerHeight/2+Math.random()*60-30)+'px';
    confetti.style.background=['#ffb6e6','#ffe8ae','#b795fc'][Math.floor(Math.random()*3)];
    confetti.style.width=(8+Math.random()*14)+'px';
    confetti.style.height=confetti.style.width;
    confetti.style.position='fixed';
    confetti.style.animationDuration=(1.5+Math.random()*0.7)+'s';
    confetti.style.animationDelay=(Math.random()*1)+'s';
    confetti.style.zIndex = 9999;
    document.body.appendChild(confetti);
    setTimeout(()=>confetti.remove(),2500);
  }
  setTimeout(()=>{this.classList.remove('active');},1600);
  setTimeout(()=>{alert(translations[lang].joyMsg);},800);
});
</script>
</body>
</html>
