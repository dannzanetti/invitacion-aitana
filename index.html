<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Baby Shower de Aitana</title>
<link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Montserrat:wght@400;700&display=swap" rel="stylesheet">

<style>
/* ===== Base ===== */
body {
  font-family:'Montserrat',sans-serif;
  background:linear-gradient(270deg,#fde8f3,#e6d0fa,#ffe8ae);
  background-size:600% 600%;
  animation:gradientMove 20s ease infinite;
  margin:0;overflow-x:hidden;
  transition:background 1s, color 1s;
}
body.dark {
  background:linear-gradient(270deg,#232333,#2c2c36,#47386e);
  color:#f6f6f6;
}
@keyframes gradientMove { 0%{background-position:0% 50%} 50%{background-position:100% 50%} 100%{background-position:0% 50%} }

.rain-emoji{position:fixed;top:-64px;z-index:1;font-size:2.2rem;pointer-events:none;animation:emojiFall linear infinite;}
@keyframes emojiFall {0%{top:-64px;opacity:.8;}90%{opacity:.8;}100%{top:100vh;opacity:0;}}

/* === Botones flotantes (lado derecho) === */
.floating-controls{position:fixed;right:24px;left:auto;bottom:24px;display:flex;flex-direction:column;gap:22px;z-index:500;}
.floating-controls .fc-btn{
  background:#fff;border:2px solid #000;border-radius:50%;
  width:68px;height:68px;display:flex;align-items:center;justify-content:center;
  font-size:2.55rem;color:#000;font-weight:bold;box-shadow:0 2px 22px #b47ae033;cursor:pointer;outline:none;transition:transform .16s;
}
.floating-controls .fc-btn:hover{transform:scale(1.13);}
body.dark .floating-controls .fc-btn{box-shadow:0 2px 10px #23233388;}
@media (max-width:700px){.floating-controls{right:8px;bottom:8px;}.floating-controls .fc-btn{width:54px;height:54px;font-size:2rem;}}

/* === MÃ³dulo explicativo === */
.floating-info-module{
  max-width:510px;margin:42px auto 28px;background:rgba(255,255,255,0.9);
  border-radius:22px;box-shadow:0 6px 24px #b47ae055;padding:28px 20px 24px;text-align:center;position:relative;z-index:5;backdrop-filter:blur(6px);font-size:1rem;
}
body.dark .floating-info-module{background:rgba(44,44,54,0.87);color:#ffe8ae;box-shadow:0 6px 24px #23233377;}
.floating-info-title{
  font-family:'Dancing Script',cursive;font-size:1.5rem;font-weight:bold;margin-bottom:14px;color:#b47ae0;
  background:linear-gradient(90deg,#ff69b4,#ffb6e6,#b47ae0);-webkit-background-clip:text;-webkit-text-fill-color:transparent;
}
body.dark .floating-info-title{background:linear-gradient(90deg,#ffe8ae,#b795fc,#ffb6e6);-webkit-background-clip:text;-webkit-text-fill-color:transparent;}
.floating-info-list{list-style:none;padding:0;margin:0 0 8px;text-align:center;font-size:.95rem;display:inline-block;}
.floating-info-list li{margin-bottom:11px;font-size:.98rem;display:flex;align-items:center;gap:12px;justify-content:center;}
.floating-info-list .icon{font-size:1.25rem;margin-right:7px;transition:transform .2s;}
.floating-info-list li:hover .icon{transform:scale(1.18) rotate(-10deg);}
.floating-info-note{font-size:.95rem;color:#b47ae0;margin-top:12px;text-align:center;font-weight:bold;}
body.dark .floating-info-note{color:#ffe8ae;}

/* --- Imagen de Fer --- */
.baby-photo{
  width:100%;max-width:600px;border-radius:12px;margin:20px auto;
  animation:zoomGlow 3s ease-in-out infinite alternate;box-shadow:0 0 15px rgba(255,182,230,0.3);display:block;
}
@keyframes zoomGlow{0%{transform:scale(1);box-shadow:0 0 15px rgba(255,182,230,0.3);}100%{transform:scale(1.05);box-shadow:0 0 45px rgba(183,149,252,0.5);}}

/* --- Globos --- */
.balloon{position:fixed;width:60px;height:80px;border-radius:50% 50% 45% 45% / 60% 60% 80% 80%;opacity:.18;z-index:0;animation:float 9s infinite ease-in-out,fadeIn 2.3s cubic-bezier(.5,.1,.25,1.2) both;transition:opacity .4s;cursor:pointer;}
.balloon1{left:6vw;top:70vh;background:linear-gradient(120deg,#ffb6e6,#ffe8ae);animation-delay:0s;}
.balloon2{left:80vw;top:85vh;background:linear-gradient(120deg,#b795fc,#ffb6e6);animation-delay:2s;}
.balloon3{left:25vw;top:93vh;background:linear-gradient(120deg,#ffe8ae,#b795fc);animation-delay:1.2s;}
@keyframes float{0%{transform:translateY(0);}50%{transform:translateY(-40px);}100%{transform:translateY(0);}}
@keyframes fadeIn{0%{opacity:0;transform:scale(.97) translateY(50px);}100%{opacity:1;transform:scale(1) translateY(0);}}

#loader{position:fixed;top:0;left:0;width:100%;height:100%;background:linear-gradient(135deg,#ffe8f3,#e6d0fa,#ffe8ae);display:flex;flex-direction:column;justify-content:center;align-items:center;z-index:9999;animation:gradientMove 8s infinite alternate;}
.loader-note{font-size:2.5rem;animation:float 1.5s ease-in-out infinite;}
@keyframes float{0%,100%{transform:translateY(0);}50%{transform:translateY(-15px);}}

section{
  max-width:700px;margin:40px auto;background:rgba(255,255,255,0.80);
  padding:20px;border-radius:26px;text-align:center;box-shadow:0 4px 30px rgba(183,149,252,0.22);
  opacity:0;transform:translateY(40px);transition:all 1s ease;backdrop-filter:blur(14px);position:relative;z-index:2;
}
body.dark section{background:rgba(44,44,54,0.8);color:#eee;box-shadow:0 4px 30px #2c2c36;}
section.visible{opacity:1;transform:translateY(0);}
section.fade-in{opacity:1;animation:fadeIn 2.2s cubic-bezier(.5,.1,.25,1.2) both;}

.main-title,.sub-title{
  font-family:'Dancing Script',cursive;background:linear-gradient(90deg,#ff69b4,#ffb6e6,#b47ae0);
  -webkit-background-clip:text;-webkit-text-fill-color:transparent;
  animation:rainbowBorder 3s linear infinite,bounceSlow 4s ease-in-out infinite;
}
body.dark .main-title,body.dark .sub-title{background:linear-gradient(90deg,#ffe8ae,#b795fc,#ffb6e6);-webkit-background-clip:text;-webkit-text-fill-color:transparent;}
.main-title{font-size:3rem;margin-bottom:10px;position:relative;z-index:2;}
.sub-title{font-size:3.2rem;font-weight:bold;animation:rainbowBorder 3s linear infinite,bounceSlow 4s ease-in-out infinite,hueRotate 5s infinite linear;z-index:2;}
@keyframes rainbowBorder{0%{text-shadow:0 0 6px #ff69b4;}50%{text-shadow:0 0 14px #b47ae0;}100%{text-shadow:0 0 6px #ff69b4;}}
@keyframes bounceSlow{0%,100%{transform:translateY(0);}50%{transform:translateY(-8px);}}
@keyframes hueRotate{0%{filter:hue-rotate(0deg);}100%{filter:hue-rotate(360deg);}}
.halo-title{position:absolute;left:50%;top:0;transform:translateX(-50%);width:340px;height:90px;background:radial-gradient(circle,#ffe8ae88 0%,transparent 80%);z-index:1;filter:blur(16px);pointer-events:none;}

#countdown,#timer{
  font-weight:bold;margin:8px 0;background:linear-gradient(90deg,#ff69b4,#ffb6e6,#b47ae0);
  -webkit-background-clip:text;-webkit-text-fill-color:transparent;
}
#countdown{font-size:1.6rem;animation:pulseGlow 1.5s infinite alternate;}
#timer{font-size:2rem;animation:heartbeat 1.4s infinite ease-in-out;}
@keyframes pulseGlow{0%{text-shadow:0 0 6px #ffe8ae;}100%{text-shadow:0 0 16px #ff69b4;}}
@keyframes heartbeat{0%,100%{transform:scale(1);}50%{transform:scale(1.1);}}

.info-block p{text-align:center;font-weight:bold;margin:10px 0;font-size:1.2rem;}
.highlight-container{font-size:1.8rem;font-weight:bold;color:#ff69b4;margin-bottom:20px;animation:shimmer 3s infinite linear;}
@keyframes shimmer{0%{opacity:.6;}50%{opacity:1;}100%{opacity:.6;}}

.btn-container{display:flex;flex-direction:column;gap:18px;margin-top:25px;}
.btn-3d,.music-btn{
  width:100%;background:linear-gradient(270deg,#ffb6e6,#ffe8ae,#e6d0fa);
  background-size:400% 400%;animation:gradientMove 6s infinite alternate;color:#000;font-weight:bold;border-radius:16px;padding:18px;font-size:1.1rem;text-align:center;text-decoration:none;transition:transform .3s, box-shadow .3s;position:relative;overflow:hidden;box-shadow:0 0 20px 6px #ffe8ae66,0 2px 10px #ffb6e6dd;
}
body.dark .btn-3d,body.dark .music-btn{background:linear-gradient(270deg,#47386e,#232333,#ffe8ae);color:#fff;box-shadow:0 2px 10px #23233388;}
.btn-3d.magic,.music-btn.magic{box-shadow:0 0 60px 20px #ffe8aecc,0 2px 30px #ffb6e6cc;background:linear-gradient(270deg,#ffe8ae,#ffb6e6,#b795fc);transform:scale(1.08);animation:bounceBtn .5s;}
@keyframes bounceBtn{0%{transform:scale(1.1);}40%{transform:scale(0.95);}60%{transform:scale(1.05);}100%{transform:scale(1.0);}}
.btn-3d:hover,.music-btn:hover{animation:vibrate .4s linear infinite;transform:scale(1.05);}
@keyframes vibrate{0%,100%{transform:translateX(0);}25%{transform:translateX(-2px);}50%{transform:translateX(2px);}75%{transform:translateX(-2px);}}
.sparkle-btn{position:absolute;pointer-events:none;width:8px;height:8px;background:radial-gradient(circle,#fff 80%,rgba(255,255,255,0.13) 100%);border-radius:50%;opacity:.8;animation:sparkle-btn 1.2s infinite alternate;}
@keyframes sparkle-btn{0%{opacity:.6;transform:scale(1);}100%{opacity:1;transform:scale(1.3);}}

.btn-3d.confirmar{box-shadow:0 0 60px 20px #ffe8aecc,0 2px 30px #ffb6e6cc;border:2px solid #ffe8ae;animation:magicConfirm 1.2s infinite alternate;}
body.dark .btn-3d.confirmar{box-shadow:0 0 60px 20px #b795fc88,0 2px 30px #ffe8ae88;border-color:#b795fc;}
@keyframes magicConfirm{0%{box-shadow:0 0 60px 20px #ffe8aecc,0 2px 30px #ffb6e6cc;}100%{box-shadow:0 0 90px 30px #ffb6e6aa,0 2px 40px #ffe8aecc;}}

.confetti,.music-drop{position:fixed;z-index:1;animation:fall linear infinite;}
@keyframes fall{0%{transform:translateY(-10px);}100%{transform:translateY(100vh);}}
.music-drop{font-size:22px;opacity:0.6;}

.qr-container{display:flex;flex-direction:column;align-items:center;gap:8px;margin-top:12px;margin-bottom:14px;}
.qr-container img{width:90px;height:90px;border-radius:12px;box-shadow:0 2px 14px #b47ae033;}

.scroll-indicator{margin-top:15px;font-size:1.2rem;color:#ff69b4;font-weight:bold;animation:blink 1.5s infinite;}
@keyframes blink{0%,100%{opacity:1;}50%{opacity:0.4;}}
.scroll-arrow{display:block;font-size:2rem;color:#ff69b4;animation:bounceArrow 1.4s infinite;}
@keyframes bounceArrow{0%,100%{transform:translateY(0);}50%{transform:translateY(-8px);}}

.equalizer{display:inline-flex;gap:4px;position:absolute;right:20px;bottom:20px;}
.bar{width:6px;height:18px;background:#fff;border-radius:2px;animation:equalize 1s infinite;}
.bar:nth-child(1){animation-delay:0s;} .bar:nth-child(2){animation-delay:.2s;} .bar:nth-child(3){animation-delay:.4s;}
@keyframes equalize{0%{height:6px;}50%{height:18px;}100%{height:6px;}}

.typewriter{font-size:1.5rem;font-weight:bold;color:#b47ae0;border-right:.15em solid #b47ae0;white-space:nowrap;overflow:hidden;width:0;animation:type 4s steps(40,end) forwards,blinkCursor .75s step-end infinite;}
@keyframes type{to{width:100%;}} @keyframes blinkCursor{50%{border-color:transparent;}}

.gif-container{display:flex;justify-content:center;align-items:center;margin-top:30px;position:relative;}
.gif-container img{width:180px;z-index:2;position:relative;cursor:pointer;transition:box-shadow .2s;}
.gif-container img.active{animation:pulseGlow 1.2s infinite alternate;box-shadow:0 0 40px #ffe8ae99;}
.gif-container::before{content:'';position:absolute;width:220px;height:220px;border-radius:50%;background:radial-gradient(circle,rgba(255,182,230,0.6),transparent);animation:pulseGlow 2s infinite alternate;z-index:1;}
@keyframes pulseGlow{0%{box-shadow:0 0 10px #b47ae0;}100%{box-shadow:0 0 40px #ffe8ae99;}}

@media (max-width:700px){section{padding:10px;}.main-title{font-size:2.1rem;}.sub-title{font-size:2rem;}.baby-photo{max-width:95vw;}.floating-info-module{padding:14px 8px;}}

@keyframes miniConfetti{0%{opacity:1;transform:translateY(0);}100%{opacity:0;transform:translateY(-30px) scale(1.2);}}

/* ===== Estilos nuevos para tÃ­tulos especÃ­ficos ===== */
.future-mom-title{
  font-family:'Dancing Script',cursive;font-size:2.1rem;font-weight:700;margin:28px 0 22px;line-height:1.15;text-align:center;
  background:linear-gradient(90deg,#ff69b4,#ffb6e6,#b47ae0);-webkit-background-clip:text;-webkit-text-fill-color:transparent;
  text-shadow:0 0 10px rgba(180,122,224,.25);animation:futureGlow 3.2s ease-in-out infinite alternate;
}
body.dark .future-mom-title{background:linear-gradient(90deg,#ffe8ae,#b795fc,#ffb6e6);-webkit-background-clip:text;-webkit-text-fill-color:transparent;text-shadow:0 0 10px rgba(255,232,174,.25);}
@keyframes futureGlow{0%{filter:drop-shadow(0 0 0 rgba(180,122,224,0));}100%{filter:drop-shadow(0 0 6px rgba(180,122,224,.35));}}
.section-title{font-family:'Montserrat',sans-serif;font-weight:800;font-size:2rem;margin:22px 0 18px;text-align:center;color:#b47ae0;letter-spacing:.3px;}
body.dark .section-title{color:#ffe8ae;text-shadow:0 0 8px rgba(255,232,174,.25);}

/* ===== MÃºsica Premium ===== */
.music-grid{display:grid;grid-template-columns:1fr;gap:14px;margin-top:12px;}
@media (min-width:560px){.music-grid{grid-template-columns:1fr 1fr 1fr;}}

.track-card{
  background:rgba(255,255,255,0.9);border-radius:16px;padding:14px;
  box-shadow:0 4px 16px rgba(180,122,224,.18);display:flex;flex-direction:column;align-items:center;gap:10px;transition:box-shadow .3s, transform .2s;
}
body.dark .track-card{background:rgba(44,44,54,0.85);}
.track-card.playing{box-shadow:0 12px 28px rgba(180,122,224,.35),0 0 0 4px #ffe8ae55;transform:translateY(-2px);}

.track-btn{
  width:64px;height:64px;border-radius:50%;border:2px solid #b47ae0;background:#fff;
  font-size:1.35rem;font-weight:800;cursor:pointer;box-shadow:0 3px 12px rgba(0,0,0,.2);
  color:#b47ae0;transition:transform .15s, box-shadow .3s, background .3s, color .3s, border-color .3s;
}
.track-btn:hover{transform:scale(1.06);}
.track-btn.active{
  background:linear-gradient(135deg,#ff69b4,#b47ae0,#ffe8ae);
  color:#fff;border-color:#ff69b4;
  box-shadow:0 0 0 4px rgba(255,232,174,.35),0 12px 26px rgba(180,122,224,.45);
  animation:btnPulse 1.1s ease-in-out infinite alternate;
}
@keyframes btnPulse{0%{transform:scale(1);}100%{transform:scale(1.06);}}

.track-title{font-weight:700;}
.track-hint{font-size:.85rem;opacity:.8;}

/* Mini player */
.player{width:100%;max-width:260px;display:flex;flex-direction:column;gap:6px;align-items:center;}
.time{font-size:.85rem;opacity:.85;}
.progress{width:100%;height:7px;background:#eceaf4;border-radius:999px;overflow:hidden;position:relative;cursor:pointer;}
.progress .fill{height:100%;width:0%;background:linear-gradient(90deg,#ff69b4,#b47ae0,#ffe8ae);transition:width .2s;}
body.dark .progress{background:#3b3950;}

/* Volumen */
.controls{display:flex;align-items:center;gap:8px;margin-top:2px;}
.mute-btn{
  background:#fff;border:2px solid #b47ae0;border-radius:10px;cursor:pointer;
  padding:6px 10px;font-size:1rem;color:#b47ae0;
  transition:transform .15s, background .3s, color .3s, border-color .3s;
}
.mute-btn.active{background:#b47ae0;color:#fff;border-color:#b47ae0;}
.vol{width:120px;}
body.dark .mute-btn{background:#2c2c36;color:#ffe8ae;border-color:#ffe8ae;}
body.dark .mute-btn.active{background:#ffe8ae;color:#232333;border-color:#ffe8ae;}
</style>
</head>
<body>

<!-- Botones flotantes lado derecho -->
<div class="floating-controls">
  <button class="fc-btn" id="theme-btn" title="Modo oscuro/claro">ğŸŒ™</button>
  <button class="fc-btn" id="lang-btn" title="Idioma">ğŸ‡²ğŸ‡½</button>
  <button class="fc-btn" id="music-btn" title="MÃºsica">ğŸµ</button>
</div>

<!-- MÃ³dulo explicativo -->
<div class="floating-info-module">
  <div class="floating-info-title">ğŸ‘‹ Personaliza la invitaciÃ³n</div>
  <ul class="floating-info-list">
    <li><span class="icon">ğŸŒ™</span> Cambia el modo de luz, por si prefieres la invitaciÃ³n clarita o oscura.</li>
    <li><span class="icon">ğŸ‡²ğŸ‡½</span><span class="icon">ğŸ‡ºğŸ‡¸</span> Elige tu idioma favorito: espaÃ±ol o inglÃ©s.</li>
    <li><span class="icon">ğŸµ</span> Ponle mÃºsica de fondo para ambientar el momento.</li>
  </ul>
  <div class="floating-info-note">Â¡Haz clic en los botones de abajo a la izquierda y disfruta la experiencia como tÃº quieras!</div>
</div>

<div id="emojiRain"></div>
<div class="balloon balloon1" onclick="popBalloon(this)"></div>
<div class="balloon balloon2" onclick="popBalloon(this)"></div>
<div class="balloon balloon3" onclick="popBalloon(this)"></div>
<audio id="popBalloonSound" src="https://raw.githubusercontent.com/dannzanetti/invitacion-aitana/main/pop.mp3"></audio>

<div id="loader">
  <p id="loaderText" style="font-size:1.5rem;font-weight:bold;color:#b47ae0;">Cargando invitaciÃ³n...</p>
  <div class="loader-note">ğŸµ ğŸ¶ ğŸµ</div>
</div>

<div class="equalizer" id="equalizer" style="display:none;">
  <div class="bar"></div><div class="bar"></div><div class="bar"></div>
</div>

<main style="display:none;" id="main-content">
  <section class="fade-in">
    <div class="qr-container">
      <img src="https://api.qrserver.com/v1/create-qr-code/?size=120x120&data=https://dannzanetti.github.io/invitacion-aitana/" alt="QR InvitaciÃ³n"/>
      <a href="https://api.whatsapp.com/send?text=Â¡Te%20invito%20al%20Baby%20Shower%20de%20Aitana!%20https://dannzanetti.github.io/invitacion-aitana/" target="_blank" class="btn-3d" id="qrBtn" style="font-size:1rem;width:auto;padding:8px 14px;display:inline-block;margin-top:4px;">ğŸ’¬ Compartir por WhatsApp</a>
    </div>

    <!-- MÃºsica: 3 pistas -->
    <div id="listenMusic" style="margin-bottom:10px;">ğŸµ Haz clic en un botÃ³n para escuchar mÃºsica ğŸ¶</div>

    <div class="music-grid" id="musicGrid">
      <!-- Jump -->
      <div class="track-card" data-key="jump">
        <button class="track-btn" data-src="https://raw.githubusercontent.com/dannzanetti/invitacion-aitana/main/jump.mp3" data-key="jump" title="ğŸµ Toca para reproducir / pausar">â‘ </button>
        <div class="track-title" id="song-jump">The Outfield â€” All The Love In The World</div>
        <div class="track-hint" id="hint-jump">ğŸµ Toca para reproducir / pausar</div>
        <div class="player">
          <div class="progress" data-key="jump" id="progress-jump"><div class="fill" id="fill-jump"></div></div>
          <div class="time"><span id="elapsed-jump">0:00</span> / <span id="duration-jump">0:00</span></div>
          <div class="controls">
            <button class="mute-btn" data-key="jump" id="mute-jump" title="Silenciar/Activar sonido">ğŸ”Š</button>
            <input class="vol" type="range" min="0" max="100" value="80" id="vol-jump" title="Volumen">
          </div>
        </div>
      </div>
      <!-- Coldplay -->
      <div class="track-card" data-key="coldplay">
        <button class="track-btn" data-src="https://raw.githubusercontent.com/dannzanetti/invitacion-aitana/main/coldplay.mp3" data-key="coldplay" title="ğŸµ Toca para reproducir / pausar">â‘¡</button>
        <div class="track-title" id="song-coldplay">Coldplay â€” A Sky Full Of Stars</div>
        <div class="track-hint" id="hint-coldplay">ğŸµ Toca para reproducir / pausar</div>
        <div class="player">
          <div class="progress" data-key="coldplay" id="progress-coldplay"><div class="fill" id="fill-coldplay"></div></div>
          <div class="time"><span id="elapsed-coldplay">0:00</span> / <span id="duration-coldplay">0:00</span></div>
          <div class="controls">
            <button class="mute-btn" data-key="coldplay" id="mute-coldplay" title="Silenciar/Activar sonido">ğŸ”Š</button>
            <input class="vol" type="range" min="0" max="100" value="80" id="vol-coldplay" title="Volumen">
          </div>
        </div>
      </div>
      <!-- ROSÃ‰ & Bruno Mars -->
      <div class="track-card" data-key="bruno">
        <button class="track-btn" data-src="https://raw.githubusercontent.com/dannzanetti/invitacion-aitana/main/bruno.mp3" data-key="bruno" title="ğŸµ Toca para reproducir / pausar">â‘¢</button>
        <div class="track-title" id="song-bruno">ROSÃ‰ & Bruno Mars â€” APT.</div>
        <div class="track-hint" id="hint-bruno">ğŸµ Toca para reproducir / pausar</div>
        <div class="player">
          <div class="progress" data-key="bruno" id="progress-bruno"><div class="fill" id="fill-bruno"></div></div>
          <div class="time"><span id="elapsed-bruno">0:00</span> / <span id="duration-bruno">0:00</span></div>
          <div class="controls">
            <button class="mute-btn" data-key="bruno" id="mute-bruno" title="Silenciar/Activar sonido">ğŸ”Š</button>
            <input class="vol" type="range" min="0" max="100" value="80" id="vol-bruno" title="Volumen">
          </div>
        </div>
      </div>
    </div>

    <!-- Reproductor Ãºnico (el audio real) -->
    <audio id="music" preload="none"></audio>
    <audio id="popSound">
      <source src="https://raw.githubusercontent.com/dannzanetti/invitacion-aitana/main/pop.mp3" type="audio/mpeg">
    </audio>
  </section>

  <section class="fade-in" style="position:relative;">
    <div class="halo-title"></div>
    <h1 class="main-title">ğŸ€ Baby Shower ğŸ€</h1>
    <h2 class="sub-title">ğŸ€ AITANA ğŸ€</h2>
    <img src="https://raw.githubusercontent.com/dannzanetti/invitacion-aitana/main/Baby.png" alt="Baby" class="baby-photo"/>
    <p id="futureMom" class="future-mom-title">La futura MamÃ¡, Fer</p>
    <img src="https://raw.githubusercontent.com/dannzanetti/invitacion-aitana/main/0.JPG" alt="La futura MamÃ¡, Fer" class="baby-photo" style="margin-top:12px;max-width:480px;">
  </section>

  <section class="fade-in">
    <div id="countdown">ğŸˆ Â¡Faltan X dÃ­as para el gran dÃ­a! ğŸˆ</div>
    <div id="timer">00d : 00h : 00m : 00s</div>
  </section>

  <section class="info-block fade-in">
    <p id="infoDate">ğŸ“… <strong>SÃ¡bado 20 de Septiembre</strong></p>
    <p id="infoTime">â° <strong>2:00 PM â€“ 11:00 PM</strong></p>
    <p id="infoPlace">ğŸ˜ï¸ <strong>Residencial Sendero Santa Fe</strong></p>
    <p id="infoRSVP">âš ï¸ <strong>Confirma antes del 14 de septiembre</strong></p>
  </section>

  <section class="fade-in">
    <div class="highlight-container" id="partyTitle">Â¡Te esperamos con!</div>
    <div style="margin-top:20px;">
      <p id="food">ğŸŒ® Tacos de guisado</p>
      <p id="bar">ğŸ¸ Barra libre:</p>
      <p id="drinks">ğŸ» Cervezas | ğŸ¹ Tequila | ğŸ¥ƒ Ron | ğŸ¥‚ Whisky</p>
      <p id="fun">ğŸ² Juegos | ğŸ–ï¸ Rifas | ğŸ’ƒ Baile</p>
    </div>
  </section>

  <section class="fade-in">
    <div class="btn-container">
      <a href="https://waze.com/ul/h9g3qhubmq" target="_blank" class="btn-3d" id="waze">ğŸ“ CÃ³mo llegar con Waze</a>
      <a href="https://maps.app.goo.gl/aJot9z4Qja81DHsw8?g_st=aw" target="_blank" class="btn-3d" id="gmaps">ğŸ“ CÃ³mo llegar con Google Maps</a>
      <a href="https://docs.google.com/forms/d/e/1FAIpQLSd-vY-AAhe7GGVQdxJmZvxr-5m6rQh7PgrfKwXY0Dn1-ksgRw/viewform" target="_blank" class="btn-3d confirmar" id="confirmar-btn">âœ… Confirmar asistencia</a>
      <a href="https://mesaderegalos.liverpool.com.mx/milistaderegalos/51734815" target="_blank" class="btn-3d" id="liverpool">ğŸ Mesa de regalos Liverpool</a>
      <a href="https://www.amazon.com.mx/baby-reg/waldodanielalvarez-martinez-diciembre-2025-ciudaddemexico/187ABTMWV8E8D" target="_blank" class="btn-3d" id="amazon">ğŸ“¦ Mesa de regalos Amazon</a>
    </div>
  </section>

  <section class="fade-in">
    <div style="display:flex;justify-content:space-between;gap:10px;">
      <a href="https://calendar.google.com/calendar/render?action=TEMPLATE&text=Baby+Shower+Aitana&dates=20250920T200000Z/20250921T050000Z&details=Baby+Shower+de+Aitana&location=Residencial+Sendero+Santa+Fe" target="_blank" class="btn-3d" id="calendarG" style="width:48%;">ğŸ“… Google Calendar</a>
      <a href="https://dannzanetti.github.io/invitacion-aitana/babyshower.ics" class="btn-3d" id="calendarA" style="width:48%;">ğŸ Apple Calendar</a>
    </div>

    <!-- GalerÃ­a slider -->
    <section class="fade-in">
      <h2 id="genderRevealTitle" class="section-title">Â¡AsÃ­ vivimos el Gender Reveal! ğŸ‰ğŸ’—</h2>

      <style>
        .slider-container{position:relative;max-width:720px;margin:0 auto;overflow:hidden;border-radius:14px;box-shadow:0 6px 20px rgba(180,122,224,0.2);}
        .slider{display:flex;transition:transform .5s ease-in-out;}
        .slide{min-width:100%;box-sizing:border-box;}
        .slide img{width:100%;height:auto;display:block;border-radius:12px;}
        .prev,.next{
          position:absolute;top:50%;transform:translateY(-50%);
          background-color:#ffffffcc;color:#b47ae0;font-weight:bold;font-size:2rem;border:none;cursor:pointer;padding:8px 14px;border-radius:50%;
          box-shadow:0 2px 8px rgba(0,0,0,0.2);z-index:10;
        }
        .prev:hover,.next:hover{background-color:#ffe8ae;}
        .prev{left:10px;}.next{right:10px;}
        .dots{text-align:center;margin-top:12px;}
        .dots span{height:12px;width:12px;margin:0 4px;background-color:#ddd;border-radius:50%;display:inline-block;cursor:pointer;transition:background-color .3s;}
        .dots .active{background-color:#b47ae0;}
      </style>

      <div class="slider-container">
        <div class="slider" id="photoSlider">
          <!-- Fotos -->
          <div class="slide"><img src="https://raw.githubusercontent.com/dannzanetti/invitacion-aitana/main/1.JPG" alt="Foto 1"></div>
          <div class="slide"><img src="https://raw.githubusercontent.com/dannzanetti/invitacion-aitana/main/2.JPG" alt="Foto 2"></div>
          <div class="slide"><img src="https://raw.githubusercontent.com/dannzanetti/invitacion-aitana/main/3.JPG" alt="Foto 3"></div>
          <div class="slide"><img src="https://raw.githubusercontent.com/dannzanetti/invitacion-aitana/main/4.JPG" alt="Foto 4"></div>
          <div class="slide"><img src="https://raw.githubusercontent.com/dannzanetti/invitacion-aitana/main/5.JPG" alt="Foto 5"></div>
          <div class="slide"><img src="https://raw.githubusercontent.com/dannzanetti/invitacion-aitana/main/6.JPG" alt="Foto 6"></div>
          <div class="slide"><img src="https://raw.githubusercontent.com/dannzanetti/invitacion-aitana/main/7.JPG" alt="Foto 7"></div>
          <div class="slide"><img src="https://raw.githubusercontent.com/dannzanetti/invitacion-aitana/main/8.JPG" alt="Foto 8"></div>
          <div class="slide"><img src="https://raw.githubusercontent.com/dannzanetti/invitacion-aitana/main/9.JPG" alt="Foto 9"></div>
          <div class="slide"><img src="https://raw.githubusercontent.com/dannzanetti/invitacion-aitana/main/10.JPG" alt="Foto 10"></div>
          <div class="slide"><img src="https://raw.githubusercontent.com/dannzanetti/invitacion-aitana/main/11.JPG" alt="Foto 11"></div>
          <div class="slide"><img src="https://raw.githubusercontent.com/dannzanetti/invitacion-aitana/main/12.JPG" alt="Foto 12"></div>
          <div class="slide"><img src="https://raw.githubusercontent.com/dannzanetti/invitacion-aitana/main/13.JPG" alt="Foto 13"></div>
          <div class="slide"><img src="https://raw.githubusercontent.com/dannzanetti/invitacion-aitana/main/14.JPG" alt="Foto 14"></div>
          <div class="slide"><img src="https://raw.githubusercontent.com/dannzanetti/invitacion-aitana/main/15.JPG" alt="Foto 15"></div>
          <div class="slide"><img src="https://raw.githubusercontent.com/dannzanetti/invitacion-aitana/main/16.JPG" alt="Foto 16"></div>
          <div class="slide"><img src="https://raw.githubusercontent.com/dannzanetti/invitacion-aitana/main/17.JPG" alt="Foto 17"></div>
          <div class="slide"><img src="https://raw.githubusercontent.com/dannzanetti/invitacion-aitana/main/18.JPG" alt="Foto 18"></div>
          <div class="slide"><img src="https://raw.githubusercontent.com/dannzanetti/invitacion-aitana/main/19.JPG" alt="Foto 19"></div>
          <div class="slide"><img src="https://raw.githubusercontent.com/dannzanetti/invitacion-aitana/main/20.JPG" alt="Foto 20"></div>
          <div class="slide"><img src="https://raw.githubusercontent.com/dannzanetti/invitacion-aitana/main/21.JPG" alt="Foto 21"></div>
        </div>
        <button class="prev" onclick="prevSlide()">â®</button>
        <button class="next" onclick="nextSlide()">â¯</button>
        <div class="dots" id="dotsContainer"></div>
      </div>

      <script>
        let currentIndex = 0;
        const slides = document.querySelectorAll('.slide');
        const slider = document.getElementById('photoSlider');
        const dotsContainer = document.getElementById('dotsContainer');
        slides.forEach((_, i) => { const dot = document.createElement('span'); dot.onclick = () => goToSlide(i); dotsContainer.appendChild(dot); });
        const dots = dotsContainer.querySelectorAll('span');
        function updateSlider(){ slider.style.transform = `translateX(-${currentIndex * 100}%)`; dots.forEach(d=>d.classList.remove('active')); dots[currentIndex].classList.add('active'); }
        function nextSlide(){ currentIndex = (currentIndex + 1) % slides.length; updateSlider(); }
        function prevSlide(){ currentIndex = (currentIndex - 1 + slides.length) % slides.length; updateSlider(); }
        function goToSlide(index){ currentIndex = index; updateSlider(); }
        updateSlider(); setInterval(()=>nextSlide(),4000);
      </script>
    </section>
  </section>

  <section class="fade-in">
    <p class="typewriter">ğŸ’• Â¡Gracias por acompaÃ±arnos! ğŸ’•</p>
    <div class="gif-container">
      <img id="finalGif" src="https://media0.giphy.com/media/v1.Y2lkPTc5MGI3NjExeWV0NDMza3c2eXVsM2VrMnNhdHcyMG0yN2Z5YzN5aWV2bHJpdjk1OSZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/QMkPpxPDYY0fu/giphy.gif" alt="GIF Final">
    </div>
    <p id="gifFinal" style="margin-top:20px;font-size:1.4rem;color:#b47ae0;font-weight:bold;">âœ¨ Â¡SerÃ¡ un dÃ­a mÃ¡gico para celebrar juntos! âœ¨</p>
  </section>
</main>

<script>
/* ===== Lluvia de emojis ===== */
const emojiRain = document.getElementById('emojiRain');
const emojis = ['ğŸ’–','âœ¨','ğŸ¦‹','ğŸŒ¸','ğŸ£','ğŸ™ˆ','ğŸ™‰','ğŸ™Š','ğŸ','ğŸ¶','â­','ğŸ’«','ğŸŠ','ğŸ¼','ğŸ‰'];
function rainEmojis(){
  for(let i=0;i<20;i++){
    const e=document.createElement('span');
    e.className='rain-emoji';
    e.textContent=emojis[Math.floor(Math.random()*emojis.length)];
    e.style.left=Math.random()*98+'vw';
    e.style.animationDuration=(4.5+Math.random()*2.5)+'s';
    e.style.animationDelay=(Math.random()*2)+'s';
    emojiRain.appendChild(e);
    setTimeout(()=>e.remove(),7000);
  }
}
setInterval(rainEmojis,2000); rainEmojis();

/* ===== Traducciones ===== */
const translations = {
  es: {
    mainTitle:'ğŸ€ Baby Shower ğŸ€',
    subTitle:'ğŸ€ AITANA ğŸ€',
    qrBtn:'ğŸ’¬ Compartir por WhatsApp',
    listenMusic:'ğŸµ Haz clic en un botÃ³n para escuchar mÃºsica ğŸ¶',
    musicBtn:'â–¶ï¸ MÃºsica ON/OFF',
    scroll:'Â¡Sigue bajando para ver todos los detalles!',
    countdown:'ğŸˆ Â¡Faltan X dÃ­as para el gran dÃ­a! ğŸˆ',
    today:'ğŸ‰ Â¡Hoy es el gran dÃ­a! ğŸ‰',
    timer:'00d : 00h : 00m : 00s',
    infoDate:'ğŸ“… <strong>SÃ¡bado 20 de Septiembre</strong>',
    infoTime:'â° <strong>2:00 PM â€“ 11:00 PM</strong>',
    infoPlace:'ğŸ˜ï¸ <strong>Residencial Sendero Santa Fe</strong>',
    infoRSVP:'âš ï¸ <strong>Confirma antes del 14 de septiembre</strong>',
    partyTitle:'Â¡Te esperamos con!',
    food:'ğŸŒ® Tacos de guisado',
    bar:'ğŸ¸ Barra libre:',
    drinks:'ğŸ» Cervezas | ğŸ¹ Tequila | ğŸ¥ƒ Ron | ğŸ¥‚ Whisky',
    fun:'ğŸ² Juegos | ğŸ–ï¸ Rifas | ğŸ’ƒ Baile',
    waze:'ğŸ“ CÃ³mo llegar con Waze',
    gmaps:'ğŸ“ CÃ³mo llegar con Google Maps',
    confirmBtn:'âœ… Confirmar asistencia',
    liverpool:'ğŸ Mesa de regalos Liverpool',
    amazon:'ğŸ“¦ Mesa de regalos Amazon',
    calendarG:'ğŸ“… Google Calendar',
    calendarA:'ğŸ Apple Calendar',
    thanks:'ğŸ’• Â¡Gracias por acompaÃ±arnos! ğŸ’•',
    gifFinal:'âœ¨ Â¡SerÃ¡ un dÃ­a mÃ¡gico para celebrar juntos! âœ¨',
    esEn:'ğŸ‡²ğŸ‡½',
    confirmMsg:'Â¡Gracias por confirmar tu asistencia! ğŸ‰',
    joyMsg:'Â¡Gracias por tu alegrÃ­a! ğŸ’œ',
    loading:'Cargando invitaciÃ³n...',
    floatingInfoTitle:"ğŸ‘‹ Personaliza la invitaciÃ³n",
    floatingInfoList:[
      "ğŸŒ™ Cambia el modo de luz, por si prefieres la invitaciÃ³n clarita o oscura.",
      "ğŸ‡²ğŸ‡½ ğŸ‡ºğŸ‡¸ Elige tu idioma favorito: espaÃ±ol o inglÃ©s.",
      "ğŸµ Ponle mÃºsica de fondo para ambientar el momento."
    ],
    floatingInfoNote:"Â¡Haz clic en los botones de abajo a la izquierda y disfruta la experiencia como tÃº quieras!",
    futureMom:"La futura MamÃ¡, Fer",
    genderRevealTitle:"Â¡AsÃ­ vivimos el Gender Reveal! ğŸ‰ğŸ’—",
    playPause:"ğŸµ Toca para reproducir / pausar",
    muteTitle:"Silenciar/Activar sonido",
    volumeTitle:"Volumen",
    songs:{
      jump:{artist:"The Outfield",title:"All The Love In The World"},
      coldplay:{artist:"Coldplay",title:"A Sky Full Of Stars"},
      bruno:{artist:"ROSÃ‰ & Bruno Mars",title:"APT."}
    }
  },
  en: {
    mainTitle:"ğŸ€ Baby Shower ğŸ€",
    subTitle:"ğŸ€ AITANA ğŸ€",
    qrBtn:"ğŸ’¬ Share by WhatsApp",
    listenMusic:"ğŸµ Click a button to play music ğŸ¶",
    musicBtn:"â–¶ï¸ Music ON/OFF",
    scroll:"Scroll down for all the details!",
    countdown:"ğŸˆ X days left for the big day! ğŸˆ",
    today:"ğŸ‰ Today is the big day! ğŸ‰",
    timer:"00d : 00h : 00m : 00s",
    infoDate:"ğŸ“… <strong>Saturday, September 20</strong>",
    infoTime:"â° <strong>2:00 PM â€“ 11:00 PM</strong>",
    infoPlace:"ğŸ˜ï¸ <strong>Residencial Sendero Santa Fe</strong>",
    infoRSVP:"âš ï¸ <strong>Confirm before September 14</strong>",
    partyTitle:"We'll be waiting with:",
    food:"ğŸŒ® Guisado tacos",
    bar:"ğŸ¸ Open bar:",
    drinks:"ğŸ» Beer | ğŸ¹ Tequila | ğŸ¥ƒ Rum | ğŸ¥‚ Whisky",
    fun:"ğŸ² Games | ğŸ–ï¸ Raffles | ğŸ’ƒ Dancing",
    waze:"ğŸ“ Waze Directions",
    gmaps:"ğŸ“ Google Maps Directions",
    confirmBtn:"âœ… Confirm attendance",
    liverpool:"ğŸ Liverpool Gift Table",
    amazon:"ğŸ“¦ Amazon Gift Table",
    calendarG:"ğŸ“… Google Calendar",
    calendarA:"ğŸ Apple Calendar",
    thanks:"ğŸ’• Thank you for joining us! ğŸ’•",
    gifFinal:"âœ¨ It'll be a magical day to celebrate together! âœ¨",
    esEn:"ğŸ‡ºğŸ‡¸",
    confirmMsg:"Thanks for confirming! ğŸ‰",
    joyMsg:"Thanks for your joy! ğŸ’œ",
    loading:"Loading invitation...",
    floatingInfoTitle:"ğŸ‘‹ Customize the invitation",
    floatingInfoList:[
      "ğŸŒ™ Change the light mode if you prefer the invitation in light or dark style.",
      "ğŸ‡²ğŸ‡½ ğŸ‡ºğŸ‡¸ Choose your favorite language: Spanish or English.",
      "ğŸµ Add background music to set the mood for the moment."
    ],
    floatingInfoNote:"Click the buttons at the bottom left and enjoy the experience your way!",
    futureMom:"The future mom, Fer",
    genderRevealTitle:"This is how we enjoyed the Gender Reveal! ğŸ‰ğŸ’—",
    playPause:"ğŸµ Tap to play / pause",
    muteTitle:"Mute/Unmute",
    volumeTitle:"Volume",
    songs:{
      jump:{artist:"The Outfield",title:"All The Love In The World"},
      coldplay:{artist:"Coldplay",title:"A Sky Full Of Stars"},
      bruno:{artist:"ROSÃ‰ & Bruno Mars",title:"APT."}
    }
  }
};

let lang = localStorage.getItem('lang') || 'es';

function renderLanguage(){
  const t = translations[lang];
  const q = (sel)=>document.querySelector(sel);
  const byId = (id)=>document.getElementById(id);
  const setText = (sel,txt)=>{ const el = typeof sel==='string'? q(sel):sel; if(el && txt!=null) el.innerText = txt; };
  const setHTML = (id,html)=>{ const el = byId(id); if(el && html!=null) el.innerHTML = html; };

  setText('.main-title',t.mainTitle);
  setText('.sub-title',t.subTitle);

  const langBtn = byId('lang-btn'); if(langBtn) langBtn.innerText = t.esEn || langBtn.innerText;
  const loaderText = byId('loaderText'); if(loaderText) loaderText.innerText = t.loading || loaderText.innerText;

  const qrBtn = byId('qrBtn'); if(qrBtn) qrBtn.innerText = t.qrBtn || qrBtn.innerText;
  setText('#listenMusic',t.listenMusic);

  // Hints + tÃ­tulos de mÃºsica + tooltips de volumen/mute
  ['jump','coldplay','bruno'].forEach(k=>{
    setText('#song-'+k, `${t.songs[k].artist} â€” ${t.songs[k].title}`);
    setText('#hint-'+k, t.playPause);
    const btn = document.querySelector(`.track-btn[data-key="${k}"]`);
    const mute = document.getElementById(`mute-${k}`);
    const vol  = document.getElementById(`vol-${k}`);
    if(btn) btn.title = t.playPause;
    if(mute) mute.title = t.muteTitle;
    if(vol)  vol.title  = t.volumeTitle;
  });

  const scrollIndicator = q('.scroll-indicator');
  if(scrollIndicator && t.scroll){ scrollIndicator.innerHTML = `<span class="scroll-arrow">â¬‡ï¸</span> ${t.scroll} <span class="scroll-arrow">â¬‡ï¸</span>`; }

  setText('#countdown',t.countdown);
  setText('#timer',t.timer);

  setHTML('infoDate',t.infoDate);
  setHTML('infoTime',t.infoTime);
  setHTML('infoPlace',t.infoPlace);
  setHTML('infoRSVP',t.infoRSVP);

  setText('#partyTitle',t.partyTitle);
  setText('#food',t.food);
  setText('#bar',t.bar);
  setText('#drinks',t.drinks);
  setText('#fun',t.fun);

  setText('#waze',t.waze);
  setText('#gmaps',t.gmaps);
  setText('#confirmar-btn',t.confirmBtn);
  setText('#liverpool',t.liverpool);
  setText('#amazon',t.amazon);
  setText('#calendarG',t.calendarG);
  setText('#calendarA',t.calendarA);

  setText('.typewriter',t.thanks);
  setText('#gifFinal',t.gifFinal);

  setText('.floating-info-title',t.floatingInfoTitle);
  const infoItems = document.querySelectorAll('.floating-info-list li');
  if(infoItems && infoItems.length && Array.isArray(t.floatingInfoList)){
    infoItems.forEach((li,i)=>{ if(t.floatingInfoList[i]!==undefined) li.innerHTML = t.floatingInfoList[i]; });
  }
  setText('.floating-info-note',t.floatingInfoNote);

  setText('#futureMom',t.futureMom);
  setText('#genderRevealTitle',t.genderRevealTitle);
}

/* ===== Tema oscuro/claro ===== */
function toggleTheme(){
  document.body.classList.toggle('dark');
  localStorage.setItem('theme', document.body.classList.contains('dark') ? 'dark' : 'light');
  document.getElementById('theme-btn').innerText = document.body.classList.contains('dark') ? 'â˜€ï¸' : 'ğŸŒ™';
}

/* ===== Idioma ===== */
function toggleLang(){
  lang = lang==='es' ? 'en' : 'es';
  localStorage.setItem('lang', lang);
  document.getElementById('lang-btn').innerText = translations[lang].esEn;
  renderLanguage();
}

/* ===== MÃºsica (reproductor Ãºnico con 3 pistas) ===== */
const audio = document.getElementById('music');
const eq = document.getElementById('equalizer');
let currentKey = null;

function formatTime(sec){
  if(!isFinite(sec)) return '0:00';
  const m = Math.floor(sec/60);
  const s = Math.floor(sec%60);
  return `${m}:${s<10?'0':''}${s}`;
}

function resetAllPlayers(){
  ['jump','coldplay','bruno'].forEach(k=>{
    const card = document.querySelector(`.track-card[data-key="${k}"]`);
    const btn  = document.querySelector(`.track-btn[data-key="${k}"]`);
    const fill = document.getElementById(`fill-${k}`);
    const elap = document.getElementById(`elapsed-${k}`);
    const dur  = document.getElementById(`duration-${k}`);
    const mute = document.getElementById(`mute-${k}`);
    if(card) card.classList.remove('playing');
    if(btn) btn.classList.remove('active');
    if(fill) fill.style.width = '0%';
    if(elap) elap.innerText = '0:00';
    if(dur && k!==currentKey) dur.innerText = '0:00';
    if(mute) mute.classList.remove('active');
  });
}

function getSavedVolume(){
  const v = localStorage.getItem('musicVolume');
  const vol = v!==null ? Math.max(0, Math.min(1, parseFloat(v))) : 0.8;
  return isNaN(vol) ? 0.8 : vol;
}
function setSavedVolume(v){
  localStorage.setItem('musicVolume', String(v));
}

function syncVolumeUI(){
  const volPercent = Math.round(audio.volume*100);
  ['jump','coldplay','bruno'].forEach(k=>{
    const slider = document.getElementById(`vol-${k}`);
    const muteBtn= document.getElementById(`mute-${k}`);
    if(slider) slider.value = String(volPercent);
    if(muteBtn){
      if(audio.muted) muteBtn.classList.add('active'); else muteBtn.classList.remove('active');
      muteBtn.textContent = audio.muted ? 'ğŸ”‡' : 'ğŸ”Š';
    }
  });
}

function playTrackByKey(key, src){
  if(currentKey !== key){
    resetAllPlayers();
    currentKey = key;
    audio.src = src;
    audio.volume = getSavedVolume();
    audio.muted = false;
    audio.play();
    const btn  = document.querySelector(`.track-btn[data-key="${key}"]`);
    const card = document.querySelector(`.track-card[data-key="${key}"]`);
    if(btn) btn.classList.add('active');
    if(card) card.classList.add('playing');
    eq.style.display = 'inline-flex';
    syncVolumeUI();
    return;
  }
  // Misma pista: alternar
  if(audio.paused){ audio.play(); eq.style.display='inline-flex'; }
  else { audio.pause(); eq.style.display='none'; }
}

// BotÃ³n flotante mÃºsica: pausa/continÃºa la pista actual
function toggleMusic(){
  if(!audio.src) return;
  if(audio.paused){ audio.play(); eq.style.display='inline-flex'; }
  else { audio.pause(); eq.style.display='none'; }
}

// Eventos del audio
audio.addEventListener('loadedmetadata', ()=>{
  if(!currentKey) return;
  const dur = document.getElementById(`duration-${currentKey}`);
  if(dur) dur.innerText = formatTime(audio.duration);
});
audio.addEventListener('timeupdate', ()=>{
  if(!currentKey) return;
  const fill = document.getElementById(`fill-${currentKey}`);
  const elap = document.getElementById(`elapsed-${currentKey}`);
  if(fill && audio.duration){
    const pct = (audio.currentTime / audio.duration) * 100;
    fill.style.width = pct + '%';
  }
  if(elap) elap.innerText = formatTime(audio.currentTime);
});
audio.addEventListener('play', ()=>{
  if(currentKey){
    const btn = document.querySelector(`.track-btn[data-key="${currentKey}"]`);
    const card = document.querySelector(`.track-card[data-key="${currentKey}"]`);
    if(btn) btn.classList.add('active');
    if(card) card.classList.add('playing');
    eq.style.display = 'inline-flex';
  }
});
audio.addEventListener('pause', ()=>{ eq.style.display='none'; });
audio.addEventListener('ended', ()=>{
  eq.style.display='none';
  const btn = document.querySelector(`.track-btn[data-key="${currentKey}"]`);
  const card = document.querySelector(`.track-card[data-key="${currentKey}"]`);
  if(btn) btn.classList.remove('active');
  if(card) card.classList.remove('playing');
});

/* ===== DOM Ready ===== */
document.addEventListener('DOMContentLoaded',()=>{
  document.getElementById('theme-btn').onclick = toggleTheme;
  document.getElementById('lang-btn').onclick = toggleLang;
  document.getElementById('music-btn').onclick = toggleMusic;
  document.getElementById('theme-btn').innerText = document.body.classList.contains('dark') ? 'â˜€ï¸' : 'ğŸŒ™';
  document.getElementById('lang-btn').innerText = translations[lang].esEn;
  renderLanguage();

  // Listeners para las 3 pistas
  document.querySelectorAll('.track-btn').forEach(btn=>{
    btn.addEventListener('click', ()=>{ playTrackByKey(btn.dataset.key, btn.dataset.src); });
  });

  // Volumen + mute (por pista, actÃºan sobre la pista actual)
  ['jump','coldplay','bruno'].forEach(k=>{
    const slider = document.getElementById(`vol-${k}`);
    const muteBtn= document.getElementById(`mute-${k}`);

    if(slider){
      slider.value = String(Math.round(getSavedVolume()*100));
      slider.addEventListener('input', ()=>{
        if(currentKey !== k) return; // solo controla si es la pista actual
        audio.muted = false;
        const vol = Math.max(0, Math.min(1, slider.value/100));
        audio.volume = vol;
        setSavedVolume(vol);
        syncVolumeUI();
      });
    }
    if(muteBtn){
      muteBtn.addEventListener('click', ()=>{
        if(currentKey !== k) return;
        audio.muted = !audio.muted;
        syncVolumeUI();
      });
    }
  });

  // Seek al hacer click en la barra de progreso (solo de la pista actual)
  document.querySelectorAll('.progress').forEach(bar=>{
    bar.addEventListener('click', (e)=>{
      const key = bar.dataset.key;
      if(currentKey !== key || !audio.duration) return;
      const rect = bar.getBoundingClientRect();
      const ratio = (e.clientX - rect.left) / rect.width;
      audio.currentTime = Math.max(0, Math.min(audio.duration * ratio, audio.duration));
    });
  });

  // Auto oscuro si no hay preferencia
  const savedTheme = localStorage.getItem('theme');
  if(!savedTheme){
    const hour = new Date().getHours();
    if(hour >= 19 || hour < 6){
      document.body.classList.add('dark');
      localStorage.setItem('theme','dark');
      document.getElementById('theme-btn').innerText = 'â˜€ï¸';
    }
  }

  // Loader
  setTimeout(()=>{
    document.getElementById('loader').style.display='none';
    document.getElementById('main-content').style.display='block';
    document.querySelectorAll('section').forEach(s=>s.classList.add('fade-in'));
  },2500);

  // Sparkles/mini confetti en botones grandes
  document.querySelectorAll('.btn-3d, .music-btn').forEach(btn=>{
    btn.addEventListener('click', function(e){
      btn.classList.add('magic');
      for(let i=0;i<15;i++){
        const c=document.createElement('div');
        c.style.position='absolute';
        c.style.left=(e.offsetX || btn.offsetWidth/2)+(Math.random()*40-20)+'px';
        c.style.top=(e.offsetY || btn.offsetHeight/2)+(Math.random()*24-12)+'px';
        c.style.background=['#ffb6e6','#ffe8ae','#b795fc'][Math.floor(Math.random()*3)];
        c.style.width=(6+Math.random()*8)+'px';
        c.style.height=c.style.width;c.style.borderRadius='50%';c.style.pointerEvents='none';c.style.opacity=.9;c.style.zIndex='10';c.style.animation='miniConfetti .8s linear forwards';
        btn.appendChild(c);
        setTimeout(()=>c.remove(),800);
      }
      setTimeout(()=>btn.classList.remove('magic'),500);
    });
    for(let i=0;i<3;i++){
      const spark=document.createElement('span');
      spark.className='sparkle-btn';
      spark.style.top=Math.random()*70+'%';
      spark.style.left=Math.random()*90+'%';
      spark.style.animationDelay=(Math.random()*1)+'s';
      btn.appendChild(spark);
    }
  });

  // Confetti + notas de mÃºsica flotantes
  for(let i=0;i<80;i++){
    const confetti=document.createElement('div');
    confetti.className='confetti';
    confetti.style.left=Math.random()*100+'vw';
    confetti.style.background=['#ffb6e6','#ffe8ae','#b795fc'][Math.floor(Math.random()*3)];
    confetti.style.width=(6+Math.random()*8)+'px';
    confetti.style.height=confetti.style.width;
    confetti.style.animationDuration=(4+Math.random()*5)+'s';
    confetti.style.animationDelay=(Math.random()*6)+'s';
    document.body.appendChild(confetti);
  }
  for(let i=0;i<10;i++){
    const note=document.createElement('div');
    note.className='music-drop';
    note.innerHTML=Math.random()>0.5?'ğŸµ':'ğŸ¶';
    note.style.left=Math.random()*95+'vw';
    note.style.animationDuration=(10+Math.random()*5)+'s';
    note.style.animationDelay=(Math.random()*4)+'s';
    document.body.appendChild(note);
  }
});

/* ===== Intersection Observer ===== */
const sections=document.querySelectorAll('section');
const observer=new IntersectionObserver(entries=>{
  entries.forEach(entry=>{if(entry.isIntersecting){entry.target.classList.add('visible');}});
},{threshold:0.2});
sections.forEach(section=>observer.observe(section));

/* ===== Countdown ===== */
const countdownEl=document.getElementById('countdown');
const timerEl=document.getElementById('timer');
const eventDate=new Date('2025-09-20T14:00:00');
function updateCountdown(){
  const now=new Date();const diff=eventDate-now;
  if(diff<=0){countdownEl.textContent=translations[lang].today;timerEl.textContent=translations[lang].timer;return;}
  const d=Math.floor(diff/(1000*60*60*24));
  const h=Math.floor((diff%(1000*60*60*24))/(1000*60*60));
  const m=Math.floor((diff%(1000*60*60))/(1000*60));
  const s=Math.floor((diff%(1000*60))/1000);
  countdownEl.textContent=translations[lang].countdown.replace('X',d);
  timerEl.textContent=`${d}d : ${h}h : ${m}m : ${s}s`;
}
updateCountdown(); setInterval(updateCountdown,1000);

/* ===== Confirmar ===== */
document.getElementById('confirmar-btn').addEventListener('click', function(){
  setTimeout(function(){
    for(let i=0;i<30;i++){
      const confetti=document.createElement('div');
      confetti.className='confetti';
      confetti.style.left=Math.random()*100+'vw';
      confetti.style.background=['#ffb6e6','#ffe8ae','#b795fc'][Math.floor(Math.random()*3)];
      confetti.style.width=(8+Math.random()*10)+'px';
      confetti.style.height=confetti.style.width;
      confetti.style.animationDuration=(2+Math.random()*2)+'s';
      confetti.style.animationDelay=(Math.random()*1)+'s';
      confetti.style.zIndex=9999;
      document.body.appendChild(confetti);
      setTimeout(()=>confetti.remove(),3000);
    }
    alert(translations[lang].confirmMsg);
  },100);
});

/* ===== Globos ===== */
function popBalloon(balloon){
  balloon.style.opacity = 0;
  document.getElementById('popBalloonSound').currentTime=0;
  document.getElementById('popBalloonSound').play();
  for(let i=0;i<20;i++){
    const confetti=document.createElement('div');
    confetti.className='confetti';
    const rect=balloon.getBoundingClientRect();
    confetti.style.left=(rect.left+30)+'px';
    confetti.style.top =(rect.top+50)+'px';
    confetti.style.background=['#ffb6e6','#ffe8ae','#b795fc'][Math.floor(Math.random()*3)];
    confetti.style.width=(8+Math.random()*8)+'px';
    confetti.style.height=confetti.style.width;
    confetti.style.position='fixed';
    confetti.style.animationDuration=(1.2+Math.random()*1)+'s';
    confetti.style.animationDelay=(Math.random()*0.7)+'s';
    confetti.style.zIndex=9999;
    document.body.appendChild(confetti);
    setTimeout(()=>confetti.remove(),2500);
  }
  setTimeout(()=>{balloon.style.display='none';},600);
}

/* ===== GIF final ===== */
document.getElementById('finalGif').addEventListener('click',function(){
  this.classList.add('active');
  for(let i=0;i<40;i++){
    const confetti=document.createElement('div');
    confetti.className='confetti';
    confetti.style.left=(window.innerWidth/2+Math.random()*120-60)+'px';
    confetti.style.top =(window.innerHeight/2+Math.random()*60-30)+'px';
    confetti.style.background=['#ffb6e6','#ffe8ae','#b795fc'][Math.floor(Math.random()*3)];
    confetti.style.width=(8+Math.random()*14)+'px';
    confetti.style.height=confetti.style.width;
    confetti.style.position='fixed';
    confetti.style.animationDuration=(1.5+Math.random()*0.7)+'s';
    confetti.style.animationDelay=(Math.random()*1)+'s';
    confetti.style.zIndex=9999;
    document.body.appendChild(confetti);
    setTimeout(()=>confetti.remove(),2500);
  }
  setTimeout(()=>{this.classList.remove('active');},1600);
  setTimeout(()=>{alert(translations[lang].joyMsg);},800);
});
</script>
</body>
</html>
